<?xml version="1.0"?>
<DocSourceVoucher>
  <Modle Name="ST">
    <Runtimes>
      <Runtime Name="Ufida.T.ST.DTO"/>
      <Runtime Name="UFIDA.T.UA.ST"/>
      <Runtime Name="Ufida.T.SM.FC"/>
    </Runtimes>
    
    <!--其他入库单 begin-->
    <Voucher Code="ST1004" Name="RDRecordDTO" Title="其他入库单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据ID"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdinRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="经手人"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
	  <Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
	  <Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
          <Filter Name="InRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
	  <Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
	<Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}<!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
			  RDRecordDTO.ID IN
			  (
			  select id from ST_RdRecord where id in
			  (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
			  where SubsidiaryBook.IsTrueAccount=1-- 记账标志
			  and SubsidiaryBook.idvoucherType={IdvoucherType}--其他入库单单据类型
			  )
			  )
			  and
			  (((RdRecordDTO.idsourceVoucherType='30B3E62A-9EB0-4D81-87A6-49EA5F1F5891' --组装
			  and RdRecordDTO.SourceVoucherId in (select id from ST_AssemDetachVoucher AssemDetachVoucher where AssemDetachVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='AssemDetachToGL')=1)
			  or
			  ((RdRecordDTO.idsourceVoucherType='6D6FB7AD-D9B3-4AFA-81F5-527EF430927E' --形态
			  and RdRecordDTO.SourceVoucherId in (select id from ST_ShapeVoucher ShapeVoucher where ShapeVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='ShapeToGL')=1)
			  or
			  ((RdRecordDTO.idsourceVoucherType='8BA2C1C7-7B7C-4276-8657-44535F2BB419' --盘点
			  and RdRecordDTO.SourceVoucherId in (select id from ST_CheckVoucher CheckVoucher where CheckVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='CheckBusinessToGL')=1)
			  or
			  RdRecordDTO.idsourceVoucherType is null
			  or
			  RdRecordDTO.idsourceVoucherType = '21EA9921-40C1-46EB-BF55-2DF64C7CDDFB'
			  )
		  </Filter>
        </BusinessFilters>
		<IsContainZero Name="明细金额全为0不显示">
			Exists
			(
			select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
			)
		</IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
          <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
          <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型"/>
          <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型Name"/>
          <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型Name"/>
          <Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
          <Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
          <Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
          <Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
          <Property Name="RDRecordDTO.Idclerk" Title="人员ID"/>
          <Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
          <Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="RDRecordDTO.Idproject" Title="项目"/>
          <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
          <Property Name="RDRecordDTO.IdrdStyle" Title="入库类别"/>
          <Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="其他入库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
			<Property Name="RDRecordDetailDTO.Inventory.IsSingleUnit" Title="是否单计量"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
			<Property Name="RDRecordDetailDTO.Idunit" Title="计量单位ID"/>
			<Property Name="RDRecordDetailDTO.Unit.IsMainUnit" Title="计量单位是否主计量id"/>
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
            <Property Name="RDRecordDetailDTO.SourceVoucherDetailId" Title="来源单据明细ID"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.DifferenceQuantity" Title="差异数量"/>
			<Property Name="RDRecordDetailDTO.DifferenceQuantity2" Title="差异数量2"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>
      <TransactionDoc Type="UFIDA.T.UA.ST.FC.OtherReceiveVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Partner" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        
        <!--业务类型——受赠/受赠返库/其他退库/其他 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料/自制半成品/库存商品生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>            
            <Account AccountRuleType="Inventory"><!--存货科目-->
              <!--存货科目扩展-->
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>

        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="存货对方科目生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>        
        <!--业务类型——受赠/受赠返库/其他退库/其他 end-->

        <!--盘盈 begin-->
        <!--借：存货科目 根据存货科目确定 同上 begin-->
        <!--<TransactionEntry Code="DebitFromCash" DCDirection="Debit" Name="现金科目,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
						<Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Cash"/>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>-->
        <!--借：存货科目 根据存货科目确定 同上 end-->
		  
		<!--借：待处理财产损溢 根据待处理财产损溢科目确定 begin-->
		<TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢目，生成贷方">
			<Entry>
				<!--<Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="贷方原币"/>
				<Property Doc="AmountDr" SourceVoucher="Amount" Title="贷方本币"/>
				<Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
				<Property Doc="QuantityDr" SourceVoucher="BaseQuantity" title="贷方数量(主)"/>-->
				<Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
				<Account AccountRuleType="PendingAccount">
					<ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="RDRecord.IdvoucherType"/>
					<ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
					<ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
					<ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
					<ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
					<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
					<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
					<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
					<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
					<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
					<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
					<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
					<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
					<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
					<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
					<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
					<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
				</Account>
			</Entry>
			<Auxiliary>
				<Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
				<Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
				<Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
				<Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
				<Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
				<Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
				<Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
				<Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
				<Property Doc="Idproject" SourceVoucher="Idproject"/>
				<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    			<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
				<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
				<Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
			</Auxiliary>
			<SourceRelation>
				<Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
				<Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
				<Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
				<Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
			</SourceRelation>
		</TransactionEntry>
		<!--借：待处理财产损溢 根据待处理财产损溢科目确定  end-->
		  
        <!--贷：待处理财产损溢 根据待处理财产损溢科目确定 begin-->
        <TransactionEntry Code="CreditFromPendingAccount" DCDirection="Credit" Name="待处理财产损溢目，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
			<Property Doc="QuantityCr" SourceVoucher="BaseQuantity" title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：待处理财产损溢 根据待处理财产损溢科目确定  end-->
        <!--盘盈 end-->
        
        <!--业务类型——形态转换/组装/拆卸 begin-->
        <TransactionEntry Code="DebitFromInventory_BC_BE" DCDirection="Debit" Name="原材料/自制半成品/库存商品生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目-->
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>

        <TransactionEntry Code="CreditFromInventoryPartner_BC_BE" DCDirection="Credit" Name="生产成本生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.Idbusitype"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--业务类型——形态转换/组装/拆卸 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackOtherReceiveVoucher"/>
    </Voucher>
    <!--其他入库单 end-->

    <!--其他出库单 begin-->
    <Voucher Code="ST1024" Name="RDRecordDTO" Title="其他出库单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据ID"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdoutRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="经手人"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
	  <Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
	<Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}<!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <!--<Filter Name="自动生成的不能单独生成凭证">
            RDRecordDTO.IsAutoGenerate=0
          </Filter>-->
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
			  RDRecordDTO.ID IN
			  (
			  select id from ST_RdRecord where id in
			  (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
			  where SubsidiaryBook.IsTrueAccount=1-- 记账标志
			  and SubsidiaryBook.idvoucherType={IdvoucherType}--其他入库单单据类型
			  )
			  )
			  and
			  (((RdRecordDTO.idsourceVoucherType='30B3E62A-9EB0-4D81-87A6-49EA5F1F5891' --组装
			  and RdRecordDTO.SourceVoucherId in (select id from ST_AssemDetachVoucher AssemDetachVoucher where AssemDetachVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='AssemDetachToGL')=1)
			  or
			  ((RdRecordDTO.idsourceVoucherType='6D6FB7AD-D9B3-4AFA-81F5-527EF430927E' --形态
			  and RdRecordDTO.SourceVoucherId in (select id from ST_ShapeVoucher ShapeVoucher where ShapeVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='ShapeToGL')=1)
			  or
			  ((RdRecordDTO.idsourceVoucherType='8BA2C1C7-7B7C-4276-8657-44535F2BB419' --盘点
			  and RdRecordDTO.SourceVoucherId in (select id from ST_CheckVoucher CheckVoucher where CheckVoucher.docid is null))
			  and (select value from EAP_AccInformation where name='CheckBusinessToGL')=1)
			  or
			  RdRecordDTO.idsourceVoucherType is null
			  or
			  RdRecordDTO.idsourceVoucherType in('3DC12E8A-9243-454A-ADAA-8DC8E1109031','23A729BF-C22C-435A-BB70-3310CE931A5E','DA86C1B3-3DCC-4963-AD97-A2651D978E37')
			  )
		  </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
          <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
          <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型"/>
          <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型Name"/>
          <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型Name"/>
          <Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
          <Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
          <Property Name="RDRecordDTO.Idclerk" Title="人员ID"/>
          <Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
          <Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="RDRecordDTO.Idproject" Title="项目"/>
          <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
          <Property Name="RDRecordDTO.IdrdStyle" Title="入库类别"/>
          <Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="其他入库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
            <Property Name="RDRecordDetailDTO.SourceVoucherDetailId" Title="来源单据明细ID"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.OtherDispatchVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{NULL}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        
        <!--赠品出库/赠品退库/其他/其他退库 begin-->
        <!--借:根据存货对方科目设置确定  存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventoryPartner" DCDirection="Debit" Name="赠品出库/赠品退库/其他/其他退库,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:根据存货对方科目设置确定  存货对方科目 end-->

        <!--贷:原材料/自制半成品/库存商品  存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/自制半成品/库存商品,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/自制半成品/库存商品  存货科目 end-->
        <!--赠品出库/赠品退库/其他/其他退库 end-->
        
        <!--盘亏 begin-->
        <!--借：待处理财产损溢  根据待处理财产损溢科目确定 begin-->
        <TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
						<Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借：待处理财产损溢  根据待处理财产损溢科目确定 end-->

        <!--贷：存货科目 根据存货科目确定 begin-->
        <TransactionEntry Code="CreditFromInventoryCheck" DCDirection="Credit" Name="存货科目，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
             <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：存货科目 根据存货科目确定 end-->
        <!--盘亏 end-->

        <!--形态转换/组装/拆卸 begin-->
        <!--借:生产成本  存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventoryPartner_BC_BE" DCDirection="Debit" Name="生产成本,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:生产成本  存货对方科目 end-->

        <!--贷:原材料/自制半成品/库存商品  存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory_BC_BE" DCDirection="Credit" Name="原材料/自制半成品/库存商品,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/自制半成品/库存商品  存货科目 end-->        
        <!--形态转换/组装/拆卸 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackOtherDispatchVoucher"/>
    </Voucher>
    <!--其他出库单 end-->
    
    <!--材料出库单 begin-->
    <Voucher Code="ST1022" Name="RDRecordDTO" Title="材料出库单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdoutRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="生产车间"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="人员"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>
          <Filter Name="RdPurchaseVoucherAccountState" MapProperty="RDRecordDTO.AccountState"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
	  <Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
	<Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.ID IN
            (
            select id from ST_RdRecord where id in
            (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.IsTrueAccount=1-- 记账标志
            and SubsidiaryBook.idvoucherType={IdvoucherType}--材料出库单单据类型
            )
            )
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
          <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
          <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
          <Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
          <Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
          <Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Id" Title="部门id"/>
          <Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
          <Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
          <Property Name="RDRecordDTO.Idclerk" Title=""/>
          <Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
          <Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="RDRecordDTO.Idproject" Title="项目"/>
          <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
          <Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
          <Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="销售出库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>
      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenMaterialDispatchVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{NULL}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--借:生产成本/制/管/销/财 存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventoryPartner" DCDirection="Debit" Name="生产成本/制/管/销/财,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
             <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:生产成本/制/管/销/财 存货对方科目 end-->

        <!--贷:原材料/库存商品/自制半成品 存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/库存商品/自制半成品,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量(主)"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/库存商品/自制半成品 存货科目 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackMaterialDispatchVoucher"/>
    </Voucher>
    <!--材料出库单 end-->
    
    <!--采购入库单 begin-->
    <Voucher Code="ST1001" Name="RDRecordDTO" Title="采购入库单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="Idcurrency" MapProperty="RDRecordDTO.idcurrency" Title="币种"/>
          <Property Name="IdinRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="RDRecordDTO.idpartner" Title="供应商"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="RDRecordDTO.TotalOrigTaxAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="RDRecordDTO.TotalTaxAmount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
          <Filter Name="InRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="RDRecordDTO.Partner.Code"/>
			<Filter Name="PartnerClass" MapProperty="RDRecordDTO.Partner.IdpartnerClass" Title="客户分类"/>
          <Filter Name="Currencys" MapProperty="RDRecordDTO.Currency.ID"/>
          <Filter Name="RdPurchaseVoucherAccountState" MapProperty="RDRecordDTO.AccountState"/>    
          
          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
	<Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="RDRecordDTO.TotalOrigTaxAmount" Title="金额"/>
	<Filter Name="Amount" MapProperty="RDRecordDTO.TotalTaxAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.ID IN
            (
            select id from ST_RdRecord where id in
            (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.IsTrueAccount=1-- 记账标志
            and SubsidiaryBook.idvoucherType={IdvoucherType}--采购入库单单据类型
            )
            )
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="非合并流程下，采购入库单才能过滤出来">
            RDRecordDTO.IsMergedFlow=0
          </Filter>
          <Filter Name="采购入库单对应的调整类型为“采购核算”、调整标志为“原单补充”的入库调整单未生效，则该采购入库单不允许生凭证。">
            RDRecordDTO.id not in
            (
            select AdjustCostDetailDTO.SourceVoucherID from ST_AdjustCostVoucher as AdjustCostVoucherDTO
            left join  ST_AdjustCostVoucher_b as AdjustCostDetailDTO on AdjustCostDetailDTO.IdadjustCostVoucherDTO=AdjustCostVoucherDTO.Id
            where AdjustCostVoucherDTO.AdjustType='54DB944C-B2CB-4BF3-BF7C-5431706F08CC'
            and AdjustCostDetailDTO.AdjustFlag='DB437DA9-758E-4C4A-BBEE-F6F6432143F3'
            and AdjustCostVoucherDTO.VoucherState='D6C5E975-900D-40D3-AEF0-5D189D230FB1'
            and AdjustCostDetailDTO.IdsourceVoucherType={IdvoucherType}
            )
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
          <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
          <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型Id"/>
          <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
          <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
          <Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
          <Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
          <Property Name="RDRecordDTO.Department.Id" Title=""/>
          <Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
          <Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
          <Property Name="RDRecordDTO.Idclerk" Title=""/>
          <Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
          <Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="RDRecordDTO.Idpartner" Title=""/>
          <Property Name="RDRecordDTO.Partner.Id" Title="供应商id"/>
          <Property Name="RDRecordDTO.Partner.Code" Title="供应商编码"/>
          <Property Name="RDRecordDTO.Partner.Name" Title="供应商名称"/>          
          <Property Name="RDRecordDTO.Partner.IdpartnerClass" Title="供应商分类id"/>
          <Property Name="RDRecordDTO.Partner.PartnerClass.Id" Title="供应商分类id"/>
          <Property Name="RDRecordDTO.Partner.PartnerClass.Name" Title="供应商分类Name"/>
          <Property Name="RDRecordDTO.Partner.PartnerClass.Code" Title="供应商分类Code"/>
          <Property Name="RDRecordDTO.Partner.Iddistrict" Title="地区id"/>
          <Property Name="RDRecordDTO.Partner.District.Id" Title="地区id"/>
          <Property Name="RDRecordDTO.Partner.District.Name" Title="地区Name"/>
          <Property Name="RDRecordDTO.Partner.District.Code"  Title="地区Code"/>
          <Property Name="RDRecordDTO.Idproject" Title="项目"/>
          <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
          <Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
          <Property Name="RDRecordDTO.Memo"  Title="备注"/>
          <Property Name="RDRecordDTO.AccountingPeriod"  Title="单据日期所在期间"/>
          <Property Name="RDRecordDTO.AccountingYear"  Title="单据日期所在年度"/>
          <Property Name="RDRecordDTO.BeforeUpgrade"  Title="BeforeUpgrade"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="采购入库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
			<Property Name="RDRecordDetailDTO.Inventory.TaxRate" Title="存货税率"/>
			<Property Name="RDRecordDetailDTO.Inventory.TaxRate.ID" Title="存货税率"/>
			<Property Name="RDRecordDetailDTO.Inventory.TaxRate.Name" Title="存货税率"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
            <Property Name="RDRecordDetailDTO.OrigAmount" Title="原币金额"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="本币金额"/>
			<Property Name="RDRecordDetailDTO.Tax" Title="本币税额"/>
			<Property Name="RDRecordDetailDTO.OrigTax" Title="原币税额"/>
            <Property Name="RDRecordDetailDTO.FeeAmount" Title="费用金额"/>
            <Property Name="RDRecordDetailDTO.FeeAdjust" Title="费用调整"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
            <Property Name="RDRecordDetailDTO.CumulativeSettlementAmount" Title="累计核算金额"/>
            <Property Name="RDRecordDetailDTO.CumulativeSettlementBaseQuantity" Title="累计核算数量（主计量）"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
		  </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.PurchaseReceiveVoucher">
        <SummaryFields>
            <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
            <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
            <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
            <Property Name="Partner" Mapping="Partner.Name" Title="往来单位"/>
            <Property Name="PartnerClass" Mapping="Partner.IdpartnerClass" Title="往来单位分类"/>
            <Property Name="Department" Mapping="Department.Name" Title="部门"/>
            <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
            <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        
        <!--专业版 begin-->
        <!--库存商品/原材料/低值易耗品 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventoryPro" DCDirection="Debit" Name="库存商品/原材料/低值易耗品，生成借方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
           <!--辅助信息 begin-->
           <Auxiliary>
              <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
              <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
              <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
              <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
              <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
              <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
              <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
              <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
              <Property Doc="Idproject" SourceVoucher="Idproject"/>
              <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	    <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
              <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
              <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
              <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
              <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
              <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            </Auxiliary>
            <!--辅助信息 end-->
            <SourceRelation>
              <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
              <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
              <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
              <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
            </SourceRelation>
        </TransactionEntry>
        <!--库存商品/原材料/低值易耗品 存货科目 end-->
		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示） begin-->
		<TransactionEntry Code="DebitFromEstimatedTax" DCDirection="Debit" Name="原材料，生成借方">
			<Entry>
				<Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
				<Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
				<Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
				<Account AccountRuleType="EstimatedTax"/>
			</Entry>
			<!--辅助信息 begin-->
			<Auxiliary>
				<Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				<Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
				<Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
				<Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>

				<Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
				<Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
				<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
	   			<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
				<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

				<Property Doc="Idproject" SourceVoucher="Idproject"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>

				<Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
				<Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
				<Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
				<Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
				<Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
			</Auxiliary>
			<!--辅助信息 end-->
			<SourceRelation>
				<Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
				<Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
				<Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
				<Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
			</SourceRelation>
		</TransactionEntry>
		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示）end-->
		  
        <!--贷:采购费用 采购费用科目 begin-->
        <TransactionEntry Code="CreditFromPurchaseExpensePro" DCDirection="Credit" Name="采购费用,生成贷方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="PurchaseExpense"/>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:采购费用 采购费用科目end-->
		  
        <!--在途材料 采购科目begin-->
        <TransactionEntry Code="CreditFromPurchasePro" DCDirection="Credit" Name="在途材料,生成贷方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Purchase">
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
              <ExtendRuleProperty Name="Idwarehouse" SourceVoucherProperty="RDRecord.Idwarehouse"/>
              <ExtendRuleProperty Name="Idinventory" SourceVoucherProperty="Idinventory"/>
			  <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner" Title="往来单位ID"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.Partner.IdpartnerClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--在途材料 采购科目 end-->
		  
        <!--应付账款-暂估  暂估应付款科目 begin-->
        <TransactionEntry Code="CreditFromEstimatedApPro" DCDirection="Credit" Name="应付账款，生成贷方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="EstimatedAp">
              <ExtendRuleProperty Name="Idcurrency" SourceVoucherProperty="RDRecord.Idcurrency"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.Partner.IdpartnerClass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
   
		<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
          
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--应付账款-暂估  暂估应付款科目 end-->
		  
        <!--专业版 end-->
        
        <!--仓管通 begin-->
        <!--借:库存商品/原材料/低值易耗品 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventoryCGT" DCDirection="Debit" Name="库存商品/原材料/低值易耗品，生成借方">
            <Entry>
              <Property Doc="OrigAmountDr" SourceVoucher="OrigAmount" Title="借方原币"/>
              <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
              <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
              <Property Doc="OrigAmount" SourceVoucher="OrigAmount" Title="外币"/>
              <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
              <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
              <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
              <Account AccountRuleType="Inventory">
                <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
                <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
                <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
                <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
              </Account>
            </Entry>
            <Auxiliary>
              <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
              <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
              <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
              <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
              <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
              <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
              <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
              <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
              <Property Doc="Idproject" SourceVoucher="Idproject"/>
              <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
              <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
              <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
              <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
              <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
              <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            </Auxiliary>
            <SourceRelation>
              <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
              <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
              <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
              <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
            </SourceRelation>
          </TransactionEntry>
        <!--借:库存商品/原材料/低值易耗品 存货科目 end-->
        <!--贷: 在途材料 采购科目 begin-->
        <TransactionEntry>
          <TransactionEntry Code="CreditFromPurchaseCGT" DCDirection="Credit" Name="在途材料，生成贷方">
            <Entry>
              <Property Doc="OrigAmountCr" SourceVoucher="OrigAmount" Title="贷方原币"/>
              <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
              <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量"/>
              <Property Doc="OrigAmount" SourceVoucher="OrigAmount" Title="外币"/>
              <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
              <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
              <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>              
              <Account AccountRuleType="Purchase">
                <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
                <ExtendRuleProperty Name="Idwarehouse" SourceVoucherProperty="RDRecord.Idwarehouse"/>
                <ExtendRuleProperty Name="Idinventory" SourceVoucherProperty="Idinventory"/>
				  <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner" Title="往来单位ID"/>
                <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.Partner.IdpartnerClass"/>
                <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
              </Account>
            </Entry>
            <Auxiliary>
              <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
              <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
              <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
              <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
              <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
              <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
              <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
              <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
              <Property Doc="Idproject" SourceVoucher="Idproject"/>
              <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
              <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
              <Property Doc="Idcustomer" SourceVoucher="RDRecord.Idpartner"/>
              <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.Partner.IdpartnerClass"/>
              <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
              <Property Doc="Iddistrict" SourceVoucher="RDRecord.Partner.Iddistrict"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            </Auxiliary>
            <SourceRelation>
              <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
              <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
              <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
              <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
            </SourceRelation>
          </TransactionEntry>
        </TransactionEntry>
        <!--贷: 在途材料 采购科目 end-->
        <!--仓管通 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackPurchaseReceiveVoucher"/>     
    </Voucher>
    <!--采购入库单 end-->
    
    <!--产成品入库单 begin-->
    <Voucher Code="ST1002" Name="RDRecordDTO"  Title="产成品入库单">
      <SimpleQuery Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据ID"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdinRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="生产车间"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="经手人"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
          <Filter Name="InRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}<!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <!--<Filter Name="自动生成的不能单独生成凭证">
            RDRecordDTO.IsAutoGenerate=0
          </Filter>-->
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.ID IN
            (
            select id from ST_RdRecord where id in
            (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.IsTrueAccount=1-- 记账标志
            and SubsidiaryBook.idvoucherType={IdvoucherType}--产成品入库单单据类型
            )
            )
          </Filter>
	  </BusinessFilters>
	  <IsContainZero Name="明细金额全为0不显示">
		  Exists
		  (
		  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
		  )
	  </IsContainZero>
      </SimpleQuery>

      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
          <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
          <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
          <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="RDRecordDTO.iddepartment"  Title="生产车间ID"/>
          <Property Name="RDRecordDTO.Department.Id" Title=""/>
          <Property Name="RDRecordDTO.Department.Code" Title="生产车间编码"/>
          <Property Name="RDRecordDTO.Department.Name" Title="生产车间名称"/>
          <Property Name="RDRecordDTO.Idclerk" Title=""/>
          <Property Name="RDRecordDTO.Clerk.Id" Title="人员Id"/>
          <Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="RDRecordDTO.Idproject" Title="项目"/>
          <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
          <Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
          <Property Name="RDRecordDTO.DispatchAddress" Title="地区"/>
          <Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="产成品入库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="产品ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="产品id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="产品编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="产品名称"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenProductReceiveVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Department" Mapping="Department.Name" Title="生成车间"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Partner" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{NULL}" Title="往来单位"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--自制加工/自制退库-->
        <!--借:产成品 存货科目-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="产品明细生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        
        <!--  贷:存货业务对方科目生产成本 存货对方科目-->
        <TransactionEntry Code="CreditFromInventoryPartner"  DCDirection="Credit" Name="生产成本生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>            
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.Idpartner"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackProductReceiveVoucher"/>
  </Voucher>
    <!--产成品入库单 end-->
    
    <!--销售出库单 begin-->
    <Voucher Code="ST1021"  Name="RDRecordDTO" Title="销售出库单">
      <SimpleQuery Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
          <Property Name="Idcurrency" MapProperty="RDRecordDTO.idcurrency" Title="币种"/>          
          <Property Name="IdoutRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecordDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="RDRecordDTO.idSettleCustomer" Title="客户"/>
          <Property Name="Idproject" MapProperty="RDRecordDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>          
          <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecordDTO.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="RDRecordDTO.SettleCustomer.Code"/>
			<Filter Name="PartnerClass" MapProperty="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
          <Filter Name="Currencys" MapProperty="RDRecordDTO.Currency.ID"/>
          <Filter Name="OutRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>
          
          <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDTO.RDRecordDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="RDRecordDTO.RDRecordDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
			<Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecordDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            RDRecordDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>          
          <Filter Name="该模块启用期间之前的期初单据不生成">
            RDRecordDTO.ID IN
            (
              select id from ST_RdRecord where id in
              (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
              where SubsidiaryBook.IsTrueAccount=1-- 记账标志
              and SubsidiaryBook.idvoucherType={IdvoucherType}--销售出库单单据类型
              )
            )
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="非合并流程下，销售出库单才能过滤出来">
            RDRecordDTO.IsMergedFlow=0
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
			<Property Name="RDRecordDTO.ID"  Title="单据ID"/>
			<Property Name="RDRecordDTO.Ts"  Title="Ts"/>
			<Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
			<Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
			<Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
			<Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
			<Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
			<Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
			<Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
			<Property Name="RDRecordDTO.Code" Title="单据编号"/>
			<Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
			<Property Name="RDRecordDTO.Currency.ID"  Title="币种"/>
			<Property Name="RDRecordDTO.Currency.Name"  Title="币种名称"/>
			<Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
			<Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
			<Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
			<Property Name="RDRecordDTO.Idclerk" Title=""/>
			<Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
			<Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="RDRecordDTO.idSettleCustomer" Title=""/>
			<Property Name="RDRecordDTO.SettleCustomer.Id" Title="客户Id"/>
			<Property Name="RDRecordDTO.SettleCustomer.Code" Title="客户编码"/>
			<Property Name="RDRecordDTO.SettleCustomer.Name" Title="客户名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.idpartner" Title=""/>
			<Property Name="RDRecordDTO.Partner.Id" Title="往来单位Id"/>
			<Property Name="RDRecordDTO.Partner.Code" Title="往来单位编码"/>
			<Property Name="RDRecordDTO.Partner.Name" Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass" Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.Partner.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDTO.Project.ID"  Title="项目ID"/>
			<Property Name="RDRecordDTO.Project.Name"  Title="项目名称"/>
			<Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
			<Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
			<Property Name="RDRecordDTO.DispatchAddress" Title="地区"/>
			<Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.AccountingPeriod"  Title="单据日期所在期间"/>
			<Property Name="RDRecordDTO.AccountingYear"  Title="单据日期所在年度"/>
			<Property Name="RDRecordDTO.BeforeUpgrade"  Title="BeforeUpgrade"/>
			<Property Name="RDRecordDTO.IdsourceVoucherType"  Title="来源单据类型ID"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="销售出库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
            <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>

            <Property Name="RDRecordDetailDTO.Inventory.IsSingleUnit" Title="是否是单计量存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Idunit" Title="存货主计量id"/>
            <Property Name="RDRecordDetailDTO.Idunit" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ID" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ChangeType1" Title="计量单位换算类型"/>
            <Property Name="RDRecordDetailDTO.Unit.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Unit2.ID" Title="计量单位2"/>
            <Property Name="RDRecordDetailDTO.Unit2.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Price2" Title="成本价2"/>            
            <Property Name="RDRecordDetailDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
	        <Property Name="RDRecordDetailDTO.SourceVoucherDetailId" Title="来源单据明细ID"/>
	        <Property Name="RDRecordDetailDTO.Price" Title="成本价"/>            
            <Property Name="RDRecordDetailDTO.Amount" Title="成本金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>  
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenSaleDispatchVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="SettleCustomer.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="SettleCustomer.PartnerClass.Name" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>        
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--分录 begin-->
        <!--普通销售/销售退货  当凭证接口选项“未销货的销售出库单/未开票的销售出库单”设置为“直接结转成本”begin-->
        <TransactionEntry Code="DebitFromInventoryPartnerDir" DCDirection="Debit" Name="存货对方科目，生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
			  <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <TransactionEntry Code="CreditFromInventoryDir" DCDirection="Credit" Name="存货科目，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
				<ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
				<ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/> 
				<ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
				<ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>            
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--普通销售/销售退货  当凭证接口选项“未销货的销售出库单/未开票的销售出库单”设置为“直接结转成本”end-->
        
        <!--普通销售/销售退货  当凭证接口选项“未销货的销售出库单/未开票的销售出库单”设置为“处理为发出商品” begin-->
        <TransactionEntry Code="DebitFromInventoryPartner" DCDirection="Debit" Name="存货对方科目，生成借方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.idvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.idbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.idrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="Idpartnerclass" SourceVoucherProperty="RDRecord.SettleCustomer.idpartnerClass"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>

        <TransactionEntry Code="DebitFromDeliveryInventory" DCDirection="Debit" Name="发出商品科目，生成借方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="DeliveryInventory">
              <!--发出商品科目扩展-->
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Idpartnerclass" SourceVoucherProperty="RDRecord.SettleCustomer.idpartnerClass"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
        </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="存货科目，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--普通销售/销售退货  当凭证接口选项“未销货的销售出库单/未开票的销售出库单”设置为“处理为发出商品” end-->        
        <!--分录 end-->
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackSaleDispatchVoucher"/>
    </Voucher>
    <!--销售出库单 end-->
	<!--零售出库单 begin-->
	  <Voucher Code="ST1025"  Name="RDRecordDTO" Title="零售出库单">
		  <SimpleQuery Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
			  <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
			  <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
			  <Fields>
				  <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
				  <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
				  <Property Name="VoucherId" MapProperty="RDRecordDTO.ID" Title="单据Id" />
				  <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
				  <Property Name="IdbusiType" MapProperty="RDRecordDTO.idbusiType" Title="业务类型"/>
				  <Property Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate" Title="单据日期"/>
				  <Property Name="VoucherCode" MapProperty="RDRecordDTO.Code" Title="单据编号"/>
				  <Property Name="VoucherTs" MapProperty="RDRecordDTO.Ts" Title="单据时间戳"/>
				  <Property Name="IdoutRdStyle" MapProperty="RDRecordDTO.idrdStyle" Title="出库类别"/>
				  <Property Name="Iddepartment" MapProperty="RDRecordDTO.iddepartment" Title="部门"/>
				  <Property Name="Idcustomer" MapProperty="RDRecordDTO.idSettleCustomer" Title="客户"/>
				  <Property Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
				  <Property Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
			  </Fields>
			  <PropertyFilters>
				  <Filter Name="VoucherDate" MapProperty="RDRecordDTO.VoucherDate"/>
				  <Filter Name="VoucherCode" MapProperty="RDRecordDTO.Code"/>
				  <Filter Name="Departments" MapProperty="RDRecordDTO.Department.ID"/>
				  <Filter Name="CustomerCode" MapProperty="RDRecordDTO.SettleCustomer.Code"/>
				  <Filter Name="PartnerClass" MapProperty="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
				  <Filter Name="OutRdStyles" MapProperty="RDRecordDTO.RdStyle.ID"/>

				  <Filter Name="InventoryCode" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.Code" Title="存货"/>
				  <Filter Name="InventoryClasss" MapProperty="RDRecordDTO.RDRecordDetails.Inventory.IdinventoryClass" Title="存货分类"/>
				  <Filter Name="Warehouses" MapProperty="RDRecordDTO.RDRecordDetails.Idwarehouse" Title="仓库"/>
				  <Filter Name="OrigAmount" MapProperty="RDRecordDTO.Amount" Title="金额"/>
				  <Filter Name="Amount" MapProperty="RDRecordDTO.Amount" Title="本币金额"/>
				<Filter Name="maker" MapProperty="RDRecordDTO.makerid"  Title="制单人"/>
				<Filter Name="auditor" MapProperty="RDRecordDTO.auditorid"  Title="审核人"/>
			  </PropertyFilters>
			  <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
			  <BusinessFilters ModeName="Stock">
				  <Filter Name="已生成凭证的业务单据不生成">
					  RDRecordDTO.DocId IS NULL
				  </Filter>
				  <Filter Name="该模块启用期间之前的期初单据不生成">
					  RDRecordDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
				  </Filter>
				  <Filter Name="该模块启用期间之前的期初单据不生成">
					  RDRecordDTO.ID IN
					  (
					  select id from ST_RdRecord where id in
					  (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
					  where SubsidiaryBook.IsTrueAccount=1-- 记账标志
					  and SubsidiaryBook.idvoucherType={IdvoucherType}--零售出库单单据类型
					  )
					  )
				  </Filter>
				  <Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
					  RDRecordDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
				  </Filter>
			  </BusinessFilters>
			  <IsContainZero Name="明细金额全为0不显示">
				  Exists
				  (
				  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RdRecordDTO.id and abs(RDRecordDetailDTO.Amount)>0
				  )
			  </IsContainZero>
		  </SimpleQuery>
		  <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
			  <Header>
				  <Property Name="RDRecordDTO.ID"  Title="单据ID"/>
				  <Property Name="RDRecordDTO.Ts"  Title="Ts"/>
				  <Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
				  <Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
				  <Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
				  <Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
				  <Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
				  <Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
				  <Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
				  <Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
				  <Property Name="RDRecordDTO.Code" Title="单据编号"/>
				  <Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
				  <Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
				  <Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
				  <Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
				  <Property Name="RDRecordDTO.idSettleCustomer" Title=""/>
				  <Property Name="RDRecordDTO.SettleCustomer.Id" Title="客户Id"/>
				  <Property Name="RDRecordDTO.SettleCustomer.Code" Title="客户编码"/>
				  <Property Name="RDRecordDTO.SettleCustomer.Name" Title="客户名称"/>
				  <Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
				  <Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass"  Title="往来单位分类id"/>
				  <Property Name="RDRecordDTO.SettleCustomer.PartnerClass.ID"  Title="往来单位分类"/>
				  <Property Name="RDRecordDTO.SettleCustomer.PartnerClass.Name"  Title="往来单位名称"/>
				  <Property Name="RDRecordDTO.SettleCustomer.Iddistrict" Title="地区id"/>
				  <Property Name="RDRecordDTO.SettleCustomer.District.Id" Title="地区id"/>
				  <Property Name="RDRecordDTO.SettleCustomer.District.Name" Title="地区Name"/>
				  <Property Name="RDRecordDTO.SettleCustomer.District.Code"  Title="地区Code"/>
				  <Property Name="RDRecordDTO.idpartner" Title=""/>
				  <Property Name="RDRecordDTO.Partner.Id" Title="往来单位Id"/>
				  <Property Name="RDRecordDTO.Partner.Code" Title="往来单位编码"/>
				  <Property Name="RDRecordDTO.Partner.Name" Title="往来单位名称"/>
				  <Property Name="RDRecordDTO.Partner.IdpartnerClass" Title="往来单位分类"/>
				  <Property Name="RDRecordDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
				  <Property Name="RDRecordDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
				  <Property Name="RDRecordDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
				  <Property Name="RDRecordDTO.Partner.Iddistrict" Title="地区id"/>
				  <Property Name="RDRecordDTO.Partner.District.Id" Title="地区id"/>
				  <Property Name="RDRecordDTO.Partner.District.Name" Title="地区Name"/>
				  <Property Name="RDRecordDTO.Partner.District.Code"  Title="地区Code"/>
				  <Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
				  <Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
				  <Property Name="RDRecordDTO.Memo"  Title="备注"/>
				  <Property Name="RDRecordDTO.AccountingPeriod"  Title="单据日期所在期间"/>
				  <Property Name="RDRecordDTO.AccountingYear"  Title="单据日期所在年度"/>
				  <Property Name="RDRecordDTO.BeforeUpgrade"  Title="BeforeUpgrade"/>
				  <!--<Property Name="RDRecordDTO.IdsourceVoucherType"  Title="来源单据类型ID"/>-->
				  <Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
				  <Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
			  </Header>
			  <Details>
				  <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="零售出库单明细">
					  <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
					  <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
					  <Property Name="RDRecordDetailDTO.Idinventory" Title="存货ID"/>
					  <Property Name="RDRecordDetailDTO.Inventory.Id" Title="存货id"/>
					  <Property Name="RDRecordDetailDTO.Inventory.Code" Title="存货编码"/>
					  <Property Name="RDRecordDetailDTO.Inventory.Name" Title="存货名称"/>
					  <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
					  <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
					  <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
					  <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>

					  <Property Name="RDRecordDetailDTO.Inventory.IsSingleUnit" Title="是否是单计量存货"/>
					  <Property Name="RDRecordDetailDTO.Inventory.Idunit" Title="存货主计量id"/>
					  <Property Name="RDRecordDetailDTO.Idunit" Title="计量单位1"/>
					  <Property Name="RDRecordDetailDTO.Unit.ID" Title="计量单位1"/>
					  <Property Name="RDRecordDetailDTO.Unit.ChangeType1" Title="计量单位换算类型"/>
					  <Property Name="RDRecordDetailDTO.Unit.IsMainUnit" Title="计量单位1是否是主计量"/>
					  <Property Name="RDRecordDetailDTO.Unit2.ID" Title="计量单位2"/>
					  <Property Name="RDRecordDetailDTO.Unit2.IsMainUnit" Title="计量单位1是否是主计量"/>
					  <Property Name="RDRecordDetailDTO.Price2" Title="成本价2"/>
					  <Property Name="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
					  <!--<Property Name="RDRecordDetailDTO.SourceVoucherDetailId" Title="来源单据明细ID"/>-->
					  <Property Name="RDRecordDetailDTO.Price" Title="成本价"/>
					  <Property Name="RDRecordDetailDTO.Amount" Title="成本金额"/>
					  <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
					  <Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
				  </Detail>
			  </Details>
		  </FullQuery>
		  <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenRetailDispatchVoucher">
			  <!--摘要匹配 begin-->
			  <SummaryFields>
				  <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
				  <Property Name="BusiTypeId" Mapping="" Title="业务类型ID"/>
				  <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
				  <Property Name="Partner" Mapping="SettleCustomer.Name" Title="往来单位"/>
				  <Property Name="PartnerClass" Mapping="SettleCustomer.PartnerClass.Name" Title="往来单位分类"/>
				  <Property Name="Department" Mapping="Department.Name" Title="部门"/>
				  <Property Name="Person" Mapping="" Title="人员"/>
				  <Property Name="Memo" Mapping="Memo" Title="备注"/>
			  </SummaryFields>
			  <!--摘要匹配 end-->
			  <!--分录 begin-->
			  
			  <!--借:主营业务成本 根据存货对方科目设置确定 begin-->
			  <TransactionEntry Code="DebitFromInventoryPartner" DCDirection="Debit" Name="存货对方科目，生成借方">
				  <Entry>
					  <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
					  <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
					  <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
					  <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
					  <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
					  <!--科目匹配 begin-->
					  <Account AccountRuleType="InventoryPartner">
						  <!--存货对方科目扩展-->
						  <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
						  <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
						  <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
						  <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
						  <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
						  <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
						  <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
						  <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
						  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
					  </Account>
					  <!--科目匹配 end-->
				  </Entry>
				  <!--辅助信息 begin-->
				  <Auxiliary>
					  <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
					  <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
					  <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
					  <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
					  <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
					  <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
					  <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
					  <Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
					  <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
					  <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
					  <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
					  <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
					  <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				  </Auxiliary>
				  <!--辅助信息 end-->
				  <SourceRelation>
					  <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
					  <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
					  <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
					  <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
				  </SourceRelation>
			  </TransactionEntry>
			  <!--借:主营业务成本 根据存货对方科目设置确定  end -->
			  <!--贷:库存商品 根据存货科目设置确定 begin-->
			  <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="存货科目，生成贷方">
				  <Entry>
					  <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
					  <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
					  <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
					  <Property Doc="QuantityCr" SourceVoucher="BaseQuantity"/>
					  <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
					  <Account AccountRuleType="Inventory">
						  <!--存货科目扩展-->
						  <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
						  <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
						  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
						  <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
						  <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
						  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
						  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
						  <ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
						  <ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
					  </Account>
				  </Entry>
				  <Auxiliary>
					  <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
					  <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
					  <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
					  <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
					  <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
					  <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
					  <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
					  <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
					  <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
					  <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
					  <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
					  <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				  </Auxiliary>
				  <SourceRelation>
					  <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
					  <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
					  <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
					  <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
				  </SourceRelation>
			  </TransactionEntry>
			  <!--贷:库存商品 根据存货科目设置确定  end -->
			  
			  <!--分录 end-->
		  </TransactionDoc>
		  <!--凭证回写单据-->
		  <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackRDRecord"/>
	  </Voucher>
	<!--零售出库单  end -->
	  
    <!--红字回冲单 begin-->
    <Voucher Code="ST2008" Name="SubsidiaryBookDTO" Title="红字回冲单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="SubsidiaryBookDTO.ID" Title="单据Id" />
          <Property Name="Code" MapProperty="SubsidiaryBookDTO.Code" Title="编号"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="SubsidiaryBookDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="SubsidiaryBookDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="SubsidiaryBookDTO.VoucherCode" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="SubsidiaryBookDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdinRdStyle" MapProperty="SubsidiaryBookDTO.idrdStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="SubsidiaryBookDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="SubsidiaryBookDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="SubsidiaryBookDTO.idpartner" Title="往来单位"/>
			<Property Name="OrigAmount" MapProperty="SubsidiaryBookDTO.InAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="SubsidiaryBookDTO.InAmount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="SubsidiaryBookDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="SubsidiaryBookDTO.VoucherCode"/>
          <Filter Name="InRdStyles" MapProperty="SubsidiaryBookDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="SubsidiaryBookDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="SubsidiaryBookDTO.Clerk.ID"/>
			<Filter Name="CustomerCode" MapProperty="SubsidiaryBookDTO.Partner.Code"/>
			<Filter Name="PartnerClass" MapProperty="SubsidiaryBookDTO.Partner.IdpartnerClass" Title="客户分类"/>
          <Filter Name="InventoryCode" MapProperty="SubsidiaryBookDTO.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="SubsidiaryBookDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
	<Filter Name="Projects" MapProperty="SubsidiaryBookDTO.Idproject" Title="项目"/>
	<Filter Name="ProjectClass" MapProperty="SubsidiaryBookDTO.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="SubsidiaryBookDTO.InAmount" Title="金额"/>
	<Filter Name="Amount" MapProperty="SubsidiaryBookDTO.InAmount" Title="本币金额"/>

        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="已生成凭证的业务单据不生成">
            SubsidiaryBookDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            SubsidiaryBookDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            SubsidiaryBookDTO.ID IN
            (
            select SubsidiaryBook.ID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.idvoucherType in('9a2c7c5a-a428-4669-aa40-0aa07758241b','0CD1BD25-C2E3-4015-8044-6891F33A75CD')--采购入库单、期初暂估入库单单据类型
            and SubsidiaryBook.BackVoucher=1
            )
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				Exists
				(
				select * from ST_RDRecord
				where ST_RDRecord.id=SubsidiaryBookDTO.voucherID
				and ST_RDRecord.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
				)
			</Filter>
	  </BusinessFilters>
	  <IsContainZero Name="明细金额全为0不显示">
		  Exists
		  (
		  select SubsidiaryBookDTO.ID FROM ST_SubsidiaryBook as SubsidiaryBook where abs(SubsidiaryBook.InAmount)>0
		  )
	  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="SubsidiaryBookDTO.ID"  Title="明细账ID"/>
          <Property Name="SubsidiaryBookDTO.VoucherID"  Title="单据ID"/>
          <Property Name="SubsidiaryBookDTO.Ts"  Title="Ts"/>
          <Property Name="SubsidiaryBookDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="SubsidiaryBookDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="SubsidiaryBookDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="SubsidiaryBookDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Name" Title="业务类型"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="SubsidiaryBookDTO.VoucherDate" Title="单据日期"/>
          <Property Name="SubsidiaryBookDTO.VoucherCode" Title="单据编号"/>
          <Property Name="SubsidiaryBookDTO.iddepartment"  Title="部门ID"/>
          <Property Name="SubsidiaryBookDTO.Department.Id" Title="部门id"/>
          <Property Name="SubsidiaryBookDTO.Department.Code" Title="部门编码"/>
          <Property Name="SubsidiaryBookDTO.Department.Name" Title="部门名称"/>
          <Property Name="SubsidiaryBookDTO.Idclerk" Title=""/>
          <Property Name="SubsidiaryBookDTO.Clerk.Id" Title="人员id"/>
          <Property Name="SubsidiaryBookDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="SubsidiaryBookDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="SubsidiaryBookDTO.Idpartner" Title=""/>
          <Property Name="SubsidiaryBookDTO.Partner.Id" Title="供应商id"/>
          <Property Name="SubsidiaryBookDTO.Partner.Code" Title="供应商编码"/>
          <Property Name="SubsidiaryBookDTO.Partner.Name" Title="供应商名称"/>
          <Property Name="SubsidiaryBookDTO.Partner.IdpartnerClass" Title="供应商分类id"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Id" Title="供应商分类id"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Name" Title="供应商分类Name"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Code" Title="供应商分类Code"/>
          <Property Name="SubsidiaryBookDTO.Partner.Iddistrict" Title="地区id"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Id" Title="地区id"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Name" Title="地区Name"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Code"  Title="地区Code"/>
          <Property Name="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
          <Property Name="SubsidiaryBookDTO.IdrdStyle" Title="出库类别"/>
          <Property Name="SubsidiaryBookDTO.Memo"  Title="备注"/>
          <Property Name="SubsidiaryBookDTO.Idproject" Title="项目"/>

          <Property Name="SubsidiaryBookDTO.Idinventory" Title="存货ID"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Id" Title="存货id"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Code" Title="存货编码"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Name" Title="存货名称"/>
          <Property Name="SubsidiaryBookDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.Name" Title="存货分类"/>
		  <Property Name="SubsidiaryBookDTO.Inventory.TaxRate" Title="存货税率"/>
	      <Property Name="SubsidiaryBookDTO.Inventory.TaxRate.ID" Title="存货税率"/>
		  <Property Name="SubsidiaryBookDTO.Inventory.TaxRate.Name" Title="存货税率"/>
		  <Property Name="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
          <Property Name="SubsidiaryBookDTO.InAmount" Title="金额"/>
          <Property Name="SubsidiaryBookDTO.InQuantity" Title="数量(主计量)"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
        </Header>
      </FullQuery>
      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenRedCounteractVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="Idpartner" Title="往来单位"/>
          <Property Name="Partner" Mapping="Partner.Id" Title="往来单位"/>
          <Property Name="Partner" Mapping="Partner.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="Partner.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--借：原材料 存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料，生成借方">
          <Entry>
            <Property Doc="AmountDr" SourceVoucher="InAmount" Title="借方金额"/>
            <Property Doc="OrigAmountDr" SourceVoucher="InAmount" Title="借方原币金额"/>
            <Property Doc="OrigAmount" SourceVoucher="InAmount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="InQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="VoucherCode"/>
            <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="IdRdStyle"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="Partner.IdpartnerClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
            <Property Doc="Iddistrict" SourceVoucher="Partner.Iddistrict"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借：原材料 存货对方科目 end-->

		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示） begin-->
		<TransactionEntry Code="DebitFromEstimatedTax" DCDirection="Debit" Name="原材料，生成借方">
			<Entry>
				<Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
				<Account AccountRuleType="EstimatedTax"/>					
			</Entry>
			<!--辅助信息 begin-->
			<Auxiliary>
				<Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				<Property Doc="Idcustomer" SourceVoucher="Idpartner"/>
				<Property Doc="IdcustomerClass" SourceVoucher="Partner.IdpartnerClass"/>
				<Property Doc="Iddistrict" SourceVoucher="Partner.Iddistrict"/>

				<Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
				<Property Doc="Idperson" SourceVoucher="IdClerk"/>
				<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
				<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

				<Property Doc="Idproject" SourceVoucher="Idproject"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>				
				
				<Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
				<Property Doc="VoucherCode" SourceVoucher="VoucherCode"/>
				<Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
				<Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
				<Property Doc="IdinRdStyle" SourceVoucher="IdRdStyle"/>				
			</Auxiliary>
			<!--辅助信息 end-->
			<SourceRelation>
				<Property Doc="SourceVoucherId" SourceVoucher="ID"/>
				<Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
			</SourceRelation>
		</TransactionEntry>
		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示）end-->

        <!--贷：暂估应付款 暂估应付款科目 begin-->
        <TransactionEntry Code="CreditFromEstimatedAp" DCDirection="Credit" Name="暂估应付款，生成贷方">
          <Entry>
            <Property Doc="AmountCr" SourceVoucher="InAmount" Title="贷方本币金额"/>
            <Property Doc="OrigAmountCr" SourceVoucher="InAmount" Title="贷方原币金额"/>
            <Property Doc="OrigAmount" SourceVoucher="InAmount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="InQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="EstimatedAp">
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="Partner.IdpartnerClass"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="Idpartner"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="VoucherCode"/>
            <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="Partner.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：暂估应付款 暂估应付款科目 end-->

      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackRedCounteractVoucher"/>
    </Voucher>
    <!--红字回冲单 end -->  

    <!--蓝字回冲单 begin-->
    <Voucher Code="ST2009" Name="SubsidiaryBookDTO" Title="蓝字回冲单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="SubsidiaryBookDTO.ID" Title="单据Id" />
          <Property Name="Code" MapProperty="SubsidiaryBookDTO.Code" Title="编号"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="SubsidiaryBookDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="SubsidiaryBookDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="SubsidiaryBookDTO.VoucherCode" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="SubsidiaryBookDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdinRdStyle" MapProperty="SubsidiaryBookDTO.idrdStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="SubsidiaryBookDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="SubsidiaryBookDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="SubsidiaryBookDTO.idpartner" Title="往来单位"/>
			<Property Name="OrigAmount" MapProperty="SubsidiaryBookDTO.InAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="SubsidiaryBookDTO.InAmount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="SubsidiaryBookDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="SubsidiaryBookDTO.VoucherCode"/>
          <Filter Name="InRdStyles" MapProperty="SubsidiaryBookDTO.RdStyle.ID"/>
          <Filter Name="Departments" MapProperty="SubsidiaryBookDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="SubsidiaryBookDTO.Clerk.ID"/>
	<Filter Name="CustomerCode" MapProperty="SubsidiaryBookDTO.Partner.Code"/>
	<Filter Name="PartnerClass" MapProperty="SubsidiaryBookDTO.Partner.IdpartnerClass" Title="客户分类"/>
          <Filter Name="InventoryCode" MapProperty="SubsidiaryBookDTO.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="SubsidiaryBookDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
	  <Filter Name="Projects" MapProperty="SubsidiaryBookDTO.Idproject" Title="项目"/>
	<Filter Name="ProjectClass" MapProperty="SubsidiaryBookDTO.Project.Idclass" Title="项目分类"/>
	<Filter Name="OrigAmount" MapProperty="SubsidiaryBookDTO.InAmount" Title="金额"/>
	<Filter Name="Amount" MapProperty="SubsidiaryBookDTO.InAmount" Title="本币金额"/>

        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="已生成凭证的业务单据不生成">
            SubsidiaryBookDTO.DocId IS NULL
          </Filter>			
          <Filter Name="该模块启用期间之前的期初单据不生成">
            SubsidiaryBookDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            SubsidiaryBookDTO.ID IN
            (
            select SubsidiaryBook.ID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.idvoucherType in('9a2c7c5a-a428-4669-aa40-0aa07758241b','0CD1BD25-C2E3-4015-8044-6891F33A75CD')--采购入库单、期初暂估入库单单据类型
            and SubsidiaryBook.BackVoucher=2
            )
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				Exists
				(
				select * from ST_RDRecord
				where ST_RDRecord.id=SubsidiaryBookDTO.voucherID
				and ST_RDRecord.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
				)
			</Filter>
	  </BusinessFilters>
	  <IsContainZero Name="明细金额全为0不显示">
		  Exists
		  (
		  select SubsidiaryBookDTO.ID FROM ST_SubsidiaryBook as SubsidiaryBook where abs(SubsidiaryBook.InAmount)>0
		  )
	  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="SubsidiaryBookDTO.ID"  Title="明细账ID"/>
          <Property Name="SubsidiaryBookDTO.VoucherID"  Title="单据ID"/>
          <Property Name="SubsidiaryBookDTO.Ts"  Title="Ts"/>
          <Property Name="SubsidiaryBookDTO.IdvoucherType" Title="单据类型ID"/>
          <Property Name="SubsidiaryBookDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="SubsidiaryBookDTO.VoucherType.Code" Title="单据类型"/>
          <Property Name="SubsidiaryBookDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Name" Title="业务类型"/>
          <Property Name="SubsidiaryBookDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="SubsidiaryBookDTO.VoucherDate" Title="单据日期"/>
          <Property Name="SubsidiaryBookDTO.VoucherCode" Title="单据编号"/>
          <Property Name="SubsidiaryBookDTO.iddepartment"  Title="部门ID"/>
          <Property Name="SubsidiaryBookDTO.Department.Id" Title="部门id"/>
          <Property Name="SubsidiaryBookDTO.Department.Code" Title="部门编码"/>
          <Property Name="SubsidiaryBookDTO.Department.Name" Title="部门名称"/>
          <Property Name="SubsidiaryBookDTO.Idclerk" Title=""/>
          <Property Name="SubsidiaryBookDTO.Clerk.Id" Title="人员id"/>
          <Property Name="SubsidiaryBookDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="SubsidiaryBookDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="SubsidiaryBookDTO.Idpartner" Title=""/>
          <Property Name="SubsidiaryBookDTO.Partner.Id" Title="供应商id"/>
          <Property Name="SubsidiaryBookDTO.Partner.Code" Title="供应商编码"/>
          <Property Name="SubsidiaryBookDTO.Partner.Name" Title="供应商名称"/>
          <Property Name="SubsidiaryBookDTO.Partner.IdpartnerClass" Title="供应商分类id"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Id" Title="供应商分类id"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Name" Title="供应商分类Name"/>
          <Property Name="SubsidiaryBookDTO.Partner.PartnerClass.Code" Title="供应商分类Code"/>
          <Property Name="SubsidiaryBookDTO.Partner.Iddistrict" Title="地区id"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Id" Title="地区id"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Name" Title="地区Name"/>
          <Property Name="SubsidiaryBookDTO.Partner.District.Code"  Title="地区Code"/>
          <Property Name="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
          <Property Name="SubsidiaryBookDTO.IdrdStyle" Title="出库类别"/>
          <Property Name="SubsidiaryBookDTO.Memo"  Title="备注"/>
          <Property Name="SubsidiaryBookDTO.Idproject" Title="项目"/>

          <Property Name="SubsidiaryBookDTO.Idinventory" Title="存货ID"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Id" Title="存货id"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Code" Title="存货编码"/>
          <Property Name="SubsidiaryBookDTO.Inventory.Name" Title="存货名称"/>
          <Property Name="SubsidiaryBookDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
          <Property Name="SubsidiaryBookDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
          <Property Name="SubsidiaryBookDTO.Idwarehouse" Title="仓库"/>
          <Property Name="SubsidiaryBookDTO.InAmount" Title="金额"/>
          <Property Name="SubsidiaryBookDTO.InQuantity" Title="数量(主计量)"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="SubsidiaryBookDTO.bodypubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
        </Header>   
      </FullQuery>
      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenBlueCounteractVoucher">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="Idpartner" Title="往来单位"/>
          <Property Name="Partner" Mapping="Partner.Id" Title="往来单位"/>
          <Property Name="Partner" Mapping="Partner.Name" Title="往来单位"/>          
          <Property Name="PartnerClass" Mapping="Partner.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--借：原材料 存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料，生成借方">
          <Entry>
            <Property Doc="AmountDr" SourceVoucher="InAmount" Title="借方金额"/>
            <Property Doc="OrigAmountDr" SourceVoucher="InAmount" Title="借方原币金额"/>
            <Property Doc="OrigAmount" SourceVoucher="InAmount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="InQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="IdClerk"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="VoucherCode"/>
            <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="IdRdStyle"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="Partner.IdpartnerClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
            <Property Doc="Iddistrict" SourceVoucher="Partner.Iddistrict"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借：原材料 存货对方科目 end-->
		  
        <!--贷：在途材料 采购科目 begin-->
        <TransactionEntry Code="CreditFromPurchase" DCDirection="Credit" Name="在途材料,生成贷方">
          <Entry>
            <Property Doc="AmountCr" SourceVoucher="InAmount" Title="贷方金额"/>
            <Property Doc="OrigAmountCr" SourceVoucher="InAmount" Title="贷方原币金额"/>
            <Property Doc="OrigAmount" SourceVoucher="InAmount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="InQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="Purchase">
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
              <ExtendRuleProperty Name="Idwarehouse" SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idinventory" SourceVoucherProperty="Idinventory"/>
				<ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="Idpartner" Title="往来单位ID"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="Partner.IdpartnerClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="SubsidiaryBookDTO.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="SubsidiaryBookDTO.bodypubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="VoucherCode"/>
            <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="IdRdStyle"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="Partner.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：在途材料 采购科目 end-->

      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackBlueCounteractVoucher"/>
    </Voucher>
    <!--蓝字回冲单 end -->
    
    
    <!--入库调整单 begin-->
    <Voucher Code="ST2004" Name="AdjustCostVoucherDTO" Title="入库调整单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="Id" />
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="AdjustCostVoucherDTO.ID" Title="单据Id"/>
          <Property Name="VoucherDate" MapProperty="AdjustCostVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="AdjustCostVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="AdjustCostVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdinRdStyle" MapProperty="AdjustCostVoucherDTO.idrDStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="AdjustCostVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="AdjustCostVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="AdjustCostVoucherDTO.idpartner" Title="供应商"/>
          <Property Name="Idproject" MapProperty="AdjustCostVoucherDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="本币金额"/>
		</Fields>
        
        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="AdjustCostVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="AdjustCostVoucherDTO.Code"/>
          <Filter Name="InRdStyles" MapProperty="AdjustCostVoucherDTO.RDStyle.ID"/>
          <Filter Name="Departments" MapProperty="AdjustCostVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="AdjustCostVoucherDTO.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="AdjustCostVoucherDTO.Partner.Code"/>

          <Filter Name="InventoryCode" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="金额"/>
			<Filter Name="Amount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="AdjustCostVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="AdjustCostVoucherDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            AdjustCostVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            AdjustCostVoucherDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            AdjustCostVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				AdjustCostVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            AdjustCostVoucherDTO.ID IN
            (
            select id from ST_AdjustCostVoucher where id in
            (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.IsTrueAccount=1-- 记账标志
            and SubsidiaryBook.idvoucherType={IdvoucherType}--入库调整单单据类型
            )
            )
          </Filter>
          <Filter Name="">
            AdjustCostVoucherDTO.ID in
            (
            select ST_AdjustCostVoucher_b.idAdjustCostVoucherDTO from ST_AdjustCostVoucher_b
            left join ST_AdjustCostVoucher on ST_AdjustCostVoucher.id=ST_AdjustCostVoucher_b.idAdjustCostVoucherDTO
            where
            (
            (ST_AdjustCostVoucher.AdjustType='047B2B45-389B-42E6-8B49-13F01B6B85B3' and ST_AdjustCostVoucher_b.AdjustFlag='B4DAD564-5F2B-4CAC-A122-54BDC4C2FA7F')
            or
            (ST_AdjustCostVoucher.AdjustType='54DB944C-B2CB-4BF3-BF7C-5431706F08CC' and ST_AdjustCostVoucher_b.AdjustFlag='6B1D4338-739D-4AE1-A02B-7F9042431063')
            or
            (ST_AdjustCostVoucher.AdjustType='2CAFDE7F-0391-4AAA-BCE2-09EAA44357ED' and ST_AdjustCostVoucher_b.AdjustFlag in('DB437DA9-758E-4C4A-BBEE-F6F6432143F3','6B1D4338-739D-4AE1-A02B-7F9042431063'))
            or
            ST_AdjustCostVoucher.AdjustType='3FAE2FC9-CEE5-494E-B13F-85612D498735'
            )
            )
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select AdjustCostDetailDTO.id from ST_AdjustCostVoucher_b AdjustCostDetailDTO where AdjustCostDetailDTO.idAdjustCostVoucherDTO=AdjustCostVoucherDTO.id
			  and abs(AdjustCostDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
			<Property Name="AdjustCostVoucherDTO.Ts"  Title="Ts"/>
			<Property Name="AdjustCostVoucherDTO.ID"  Title="单据ID"/>
			<Property Name="AdjustCostVoucherDTO.idvoucherType" Title="单据类型id"/>
			<Property Name="AdjustCostVoucherDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="AdjustCostVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
			<Property Name="AdjustCostVoucherDTO.VoucherDate" Title="单据日期"/>
			<Property Name="AdjustCostVoucherDTO.Code" Title="单据编号"/>
			<Property Name="AdjustCostVoucherDTO.Memo" Title="备注"/>
			<Property Name="AdjustCostVoucherDTO.iddepartment" Title="部门ID"/>
			<Property Name="AdjustCostVoucherDTO.Department.Id" Title="部门ID"/>
			<Property Name="AdjustCostVoucherDTO.Department.Code" Title="部门编码"/>
			<Property Name="AdjustCostVoucherDTO.Department.Name" Title="部门名称"/>
			<Property Name="AdjustCostVoucherDTO.idclerk" Title="人员ID"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Id" Title="人员ID"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="AdjustCostVoucherDTO.idpartner" Title=""/>
			<Property Name="AdjustCostVoucherDTO.Partner.Id" Title="供应商Id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Code" Title="供应商编码"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Name" Title="供应商名称"/>
			<Property Name="AdjustCostVoucherDTO.Partner.IdpartnerClass" Title="客户分类"/>
			<Property Name="AdjustCostVoucherDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="AdjustCostVoucherDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Iddistrict" Title="地区id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Id" Title="地区id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Name" Title="地区Name"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Code"  Title="地区Code"/>
			<Property Name="AdjustCostVoucherDTO.IdrdStyle" Title="入库类别"/>
			<Property Name="AdjustCostVoucherDTO.idproject" Title="项目"/>
			<Property Name="AdjustCostVoucherDTO.idwarehouse" Title="仓库"/>
			<Property Name="AdjustCostVoucherDTO.AdjustType.Id" Title="调整类型"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="AdjustCostDetails" DTO="AdjustCostDetailDTO" FK="idadjustCostVoucherDTO" Title="入库调整单明细">
            <Property Name="AdjustCostDetailDTO.ID"  Title="ID"/>
            <Property Name="AdjustCostDetailDTO.Ts"  Title="Ts"/>
            <Property Name="AdjustCostDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="AdjustCostDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="AdjustCostDetailDTO.idproject"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="AdjustCostDetailDTO.idwareHouse"  Title="仓库"/>
            <Property Name="AdjustCostDetailDTO.AdjustFlag.Id"  Title="调整标志"/>
            <Property Name="AdjustCostDetailDTO.FromVoucherDetailID"  Title="来源单据明细id"/>
            <Property Name="AdjustCostDetailDTO.SourceVoucherID" Title="被调整单据Id"/>
            <Property Name="AdjustCostDetailDTO.SourceVoucherCode" Title="被调整单据Code"/>
            <Property Name="AdjustCostDetailDTO.IdsourceVoucherType" Title="被调整单据类型id"/>
            <Property Name="AdjustCostDetailDTO.Amount"  Title="金额"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.AdjustCostInVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="{NULL}" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="{NULL}" Title="业务类型"/>
          <Property Name="Partner" Mapping="Partner.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="Partner.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        
        <!--手工录入（明细调整标志：调整结存） begin-->
        <!--借:库存商品 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="库存商品生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			<Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:库存商品 存货科目 end-->
        
        <!--贷: 存货业务对方科目 存货对方科目 begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="存货业务对方科目生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
				<!--存货对方科目扩展-->
				<ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="AdjustCostVoucher.IdvoucherType"/>
				<ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="AdjustCostVoucher.IdrdStyle"/>
				<ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="AdjustCostVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="AdjustCostVoucher.Idpartner"/>
				<ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="AdjustCostVoucher.Partner.IdpartnerClass"/>
				<ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
				<ExtendRuleProperty Name="AdjustType" SourceVoucherProperty="AdjustCostVoucher.AdjustType.Id"/>
				<ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷: 存货业务对方科目 存货对方科目 end-->
        <!--手工录入（明细调整标志：调整结存） end-->

        
        <!--采购核算（明细调整标志：单到补差） begin-->
        <!--借:库存商品 存货科目 同上-->
		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示） begin-->
		<TransactionEntry Code="DebitFromEstimatedTax" DCDirection="Debit" Name="原材料，生成借方">
			<Entry>
				<Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
				<Account AccountRuleType="EstimatedTax"/>
			</Entry>
			<!--辅助信息 begin-->
			<Auxiliary>
				<Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
				<Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
				<Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
				<Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
				<Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
				<Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
				<Property Doc="Idproject" SourceVoucher="Idproject"/>
				<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
				<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
				<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

				<Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
				<Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
				<Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
				<Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
			</Auxiliary>
			<!--辅助信息 end-->
			<SourceRelation>
				<Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
				<Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
				<Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
				<Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
			</SourceRelation>
		</TransactionEntry>
		<!--借：暂估税金科目（当选项设置 暂估应付款含税选中时显示）end-->

		  <!--贷：在途材料 采购科目 begin-->
        <TransactionEntry Code="CreditFromPurchase" DCDirection="Credit" Name="在途材料,生成贷方">
          <Entry>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Purchase">
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
              <ExtendRuleProperty Name="Idwarehouse" SourceVoucherProperty="AdjustCostVoucher.Idwarehouse"/>
              <ExtendRuleProperty Name="Idinventory" SourceVoucherProperty="Idinventory"/>
			  <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="AdjustCostVoucher.Idpartner" Title="往来单位ID"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="AdjustCostVoucher.Partner.IdpartnerClass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：在途材料 采购科目 end-->

        <!--贷：暂估应付款 暂估应付款科目 begin-->
        <TransactionEntry Code="CreditFromEstimatedAp" DCDirection="Credit" Name="暂估应付款，生成贷方">
          <Entry>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="EstimatedAp">
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="AdjustCostVoucher.Partner.IdpartnerClass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="AdjustCostVoucher.Idpartner"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="AdjustCostVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：暂估应付款 暂估应付款科目 end-->
        <!--采购核算（明细调整标志：单到补差） end-->


        <!--费用分摊（明细调整标志：原单补充、单到补差） begin-->
        <!--借:库存商品 存货科目 同上-->

        <!--贷: 采购费用 采购费用科目 begin-->
        <TransactionEntry Code="CreditFromPurchaseExpense" DCDirection="Credit" Name="采购费用,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="PurchaseExpense"/>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷: 采购费用 采购费用科目 end-->
        <!--费用分摊（明细调整标志：原单补充、单到补差） end-->

        
        <!--入库调整 begin-->
        <!--借 begin-->
        <!--借:库存商品 存货科目（其他入库单，业务类型为：受赠/受赠返库/其他退库/其他/形态转换/组装/拆卸） 同上-->
        <!--借:现金科目 （其他入库单，业务类型为：盘盈） begin-->
        <TransactionEntry Code="DebitFromCash" DCDirection="Debit" Name="现金科目,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Cash"/>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
			  <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:现金科目 （其他入库单，业务类型为：盘盈） end-->
        <!--借 end-->
        
        <!--贷: 在途材料/生产成本/存货对方  begin-->
        <!--贷: 存货对方科目 （其他入库单，业务类型为：受赠/受赠返库/其他退库/其他/形态转换/组装/拆卸）  同上-->
        <!--贷:待处理财产损溢科目 （其他入库单，业务类型为：盘盈） begin-->
        <TransactionEntry Code="CreditFromPendingAccount" DCDirection="Credit" Name="待处理财产损溢目，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="AdjustCostVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="AdjustCostVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
			  <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
			  <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:待处理财产损溢科目 （其他入库单，业务类型为：盘盈） end-->
        <!--贷: 在途材料/生产成本/存货对方  end-->

        <!--贷: 在途材料 采购科目 begin-->
        <TransactionEntry>
          <TransactionEntry Code="CreditFromPurchaseCGT" DCDirection="Credit" Name="在途材料，生成贷方">
            <Entry>
              <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
              <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
              <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
              <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
              <Account AccountRuleType="Purchase">
                <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
                <ExtendRuleProperty Name="Idwarehouse" SourceVoucherProperty="AdjustCostVoucher.Idwarehouse"/>
                <ExtendRuleProperty Name="Idinventory" SourceVoucherProperty="Idinventory"/>
				<ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="AdjustCostVoucher.Idpartner" Title="往来单位ID"/>
                <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="AdjustCostVoucher.Partner.IdpartnerClass"/>
				  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
                <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
                <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
                <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

				  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				  <ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
              </Account>
            </Entry>
            <Auxiliary>
              <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
              <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
              <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
              <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
              <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
              <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
              <Property Doc="Idproject" SourceVoucher="Idproject"/>
				<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
              <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
              <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
				<Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
				<Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
				<Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
              <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
            </Auxiliary>
            <SourceRelation>
              <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
              <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
              <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
              <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
            </SourceRelation>
          </TransactionEntry>
        </TransactionEntry>
        <!--贷: 在途材料 采购科目 end-->
        <!--入库调整 end-->
        
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackAdjustCostInVoucher"/>
    </Voucher>
    <!--入库调整单 end-->

    <!--出库调整单 begin-->
    <Voucher Code="ST2005" Name="AdjustCostVoucherDTO" Title="出库调整单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="Id" />
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="AdjustCostVoucherDTO.ID" Title="单据Id"/>
          <Property Name="VoucherDate" MapProperty="AdjustCostVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="AdjustCostVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="AdjustCostVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdoutRdStyle" MapProperty="AdjustCostVoucherDTO.idrDStyle" Title="出库类别"/>
          <Property Name="Iddepartment" MapProperty="AdjustCostVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="AdjustCostVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="AdjustCostVoucherDTO.idpartner" Title="客户"/>
          <Property Name="Idproject" MapProperty="AdjustCostVoucherDTO.idproject" Title="项目"/>

			<Property Name="OrigAmount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="AdjustCostVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="AdjustCostVoucherDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="AdjustCostVoucherDTO.RDStyle.ID"/>
          <Filter Name="Departments" MapProperty="AdjustCostVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="AdjustCostVoucherDTO.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="AdjustCostVoucherDTO.Partner.Code"/>

          <Filter Name="InventoryCode" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="AdjustCostVoucherDTO.AdjustCostDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="金额"/>
			<Filter Name="Amount" MapProperty="AdjustCostVoucherDTO.sumAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="AdjustCostVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="AdjustCostVoucherDTO.auditorid"  Title="审核人"/>
	</PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            AdjustCostVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				AdjustCostVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            AdjustCostVoucherDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            AdjustCostVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            AdjustCostVoucherDTO.ID IN
            (
            select id from ST_AdjustCostVoucher where id in
            (select SubsidiaryBook.VoucherID FROM ST_SubsidiaryBook as SubsidiaryBook
            where SubsidiaryBook.IsTrueAccount=1-- 记账标志
            and SubsidiaryBook.idvoucherType={IdvoucherType}--出库调整单单据类型
            )
            )
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select AdjustCostDetailDTO.id from ST_AdjustCostVoucher_b AdjustCostDetailDTO where AdjustCostDetailDTO.idAdjustCostVoucherDTO=AdjustCostVoucherDTO.id
			  and abs(AdjustCostDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
			<Property Name="AdjustCostVoucherDTO.Ts"  Title="Ts"/>
			<Property Name="AdjustCostVoucherDTO.ID"  Title="单据ID"/>
			<Property Name="AdjustCostVoucherDTO.idvoucherType" Title="单据类型id"/>
			<Property Name="AdjustCostVoucherDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="AdjustCostVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
			<Property Name="AdjustCostVoucherDTO.VoucherDate" Title="单据日期"/>
			<Property Name="AdjustCostVoucherDTO.Code" Title="单据编号"/>
			<Property Name="AdjustCostVoucherDTO.Memo" Title="备注"/>
			<Property Name="AdjustCostVoucherDTO.iddepartment" Title="部门ID"/>
			<Property Name="AdjustCostVoucherDTO.Department.Id" Title="部门ID"/>
			<Property Name="AdjustCostVoucherDTO.Department.Code" Title="部门编码"/>
			<Property Name="AdjustCostVoucherDTO.Department.Name" Title="部门名称"/>
			<Property Name="AdjustCostVoucherDTO.idclerk" Title="人员ID"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Id" Title="人员ID"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="AdjustCostVoucherDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="AdjustCostVoucherDTO.idpartner" Title=""/>
			<Property Name="AdjustCostVoucherDTO.Partner.Id" Title="客户Id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Code" Title="客户编码"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Name" Title="客户名称"/>
			<Property Name="AdjustCostVoucherDTO.Partner.IdpartnerClass" Title="客户分类"/>
			<Property Name="AdjustCostVoucherDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="AdjustCostVoucherDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="AdjustCostVoucherDTO.Partner.Iddistrict" Title="地区id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Id" Title="地区id"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Name" Title="地区Name"/>
			<Property Name="AdjustCostVoucherDTO.Partner.District.Code"  Title="地区Code"/>			
			<Property Name="AdjustCostVoucherDTO.IdrdStyle" Title="出库类别"/>
			<Property Name="AdjustCostVoucherDTO.idproject" Title="项目"/>
			<Property Name="AdjustCostVoucherDTO.idwarehouse" Title="仓库"/>
			<Property Name="AdjustCostVoucherDTO.AdjustType.Id" Title="调整类型"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="AdjustCostVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="AdjustCostDetails" DTO="AdjustCostDetailDTO" FK="idadjustCostVoucherDTO" Title="出库调整单明细">
            <Property Name="AdjustCostDetailDTO.ID"  Title="ID"/>
            <Property Name="AdjustCostDetailDTO.Ts"  Title="Ts"/>
            <Property Name="AdjustCostDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="AdjustCostDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="AdjustCostDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="AdjustCostDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="AdjustCostDetailDTO.idproject"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="AdjustCostDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="AdjustCostDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="AdjustCostDetailDTO.idwareHouse"  Title="仓库"/>
            <Property Name="AdjustCostDetailDTO.FromVoucherDetailID"  Title="来源单据明细id"/>
            <Property Name="AdjustCostDetailDTO.SourceVoucherID" Title="被调整单据Id"/>
            <Property Name="AdjustCostDetailDTO.SourceVoucherCode" Title="被调整单据Code"/>
            <Property Name="AdjustCostDetailDTO.IdsourceVoucherType" Title="被调整单据类型id"/>
            <Property Name="AdjustCostDetailDTO.Amount"  Title="金额"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="AdjustCostDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.AdjustCostOutVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="{NULL}" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="{NULL}" Title="业务类型"/>
          <Property Name="Partner" Mapping="Partner.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="Partner.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!-- 调整类型——手工录入/期末处理 begin -->
        <!--借:根据存货对方科目设置确定 存货对方科目 begin-->
        <TransactionEntry Code="DebitFromInventoryPartner" DCDirection="Debit" Name="存货对方科目生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="AdjustCostVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="AdjustCostVoucher.IdrdStyle"/>
              <ExtendRuleProperty Name="AdjustType" SourceVoucherProperty="AdjustCostVoucher.AdjustType.Id"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="AdjustCostVoucher.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="AdjustCostVoucher.Idpartner"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="AdjustCostVoucher.Partner.IdpartnerClass"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
			  <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
			  <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:根据存货对方科目设置确定 存货对方科目 end-->
        <!--贷:原材料/库存商品 存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/库存商品生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>

              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			  <Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/库存商品 存货科目 end-->
        <!-- 调整类型——手工录入/期末处理 end -->

        <!-- 调整类型——采购核算/费用分摊/入库调整/ begin -->        
        <!--被调整单据——材料出库单 begin-->
        <!--借: 存货对方科目 同上-->
        <!--贷: 存货科目 同上-->
        <!--被调整单据——材料出库单 end-->

        <!--被调整单据——其他出库单 begin-->
        <!--借： 业务类型——赠品出库/赠品退库/其他/其他退库/形态转换/组装/拆卸 同上-->
        <!--贷： 业务类型——赠品出库/赠品退库/其他/其他退库/形态转换/组装/拆卸 同上-->
        
        <!--借：业务类型——盘亏 待处理财产损溢科目 begin-->
        <TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="AdjustCostVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="AdjustCostVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="AdjustCostVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AdjustCostVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AdjustCostVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AdjustCostVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AdjustCostVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AdjustCostVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AdjustCostVoucher.IdvoucherType" Title="单据类型"/>
            <!--<Property Doc="IdoutRdStyle" SourceVoucher="AdjustCostVoucher.IdRdStyle"/>
            <Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.idpartner"/>
            <Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.idpartnerClass"/>-->
			<Property Doc="Idcustomer" SourceVoucher="AdjustCostVoucher.Idpartner"/>
			<Property Doc="IdcustomerClass" SourceVoucher="AdjustCostVoucher.Partner.IdpartnerClass"/>
			<Property Doc="Iddistrict" SourceVoucher="AdjustCostVoucher.Partner.Iddistrict"/>
			<Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AdjustCostVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AdjustCostVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借：业务类型——盘亏 待处理财产损溢科目 end-->
        <!--贷：业务类型——盘亏 存货科目 同上-->       
        <!--被调整单据——其他出库单 end-->

        <!--被调整单据——销售出库单 begin-->
        <!--借: 存货对方科目 同上-->
        <!--贷: 存货科目 同上-->
        <!--被调整单据——销售出库单 end-->        
        <!-- 调整类型——采购核算/费用分摊/入库调整/ end -->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackAdjustCostOutVoucher"/>
    </Voucher>
    <!--出库调整单 end-->

    <!--调拨单 begin-->
    <Voucher Code="ST1031" Name="TransVoucherDTO" Title="调拨单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="Id" />
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="TransVoucherDTO.ID" Title="单据Id"/>
          <Property Name="VoucherDate" MapProperty="TransVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="TransVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="TransVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdbusiType" MapProperty="TransVoucherDTO.idbusiType" Title="业务类型"/>
          <Property Name="IdoutRdStyle" MapProperty="TransVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="IdinRdStyle" MapProperty="TransVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="TransVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="TransVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idproject" MapProperty="TransVoucherDTO.idproject" Title="项目"/>
			<Property Name="OrigAmount" MapProperty="TransVoucherDTO.TotalOutAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="TransVoucherDTO.TotalOutAmount" Title="本币金额"/>
        </Fields>
        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="TransVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="TransVoucherDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="TransVoucherDTO.DispatchStyle.ID"/>
          <Filter Name="InRdStyles" MapProperty="TransVoucherDTO.ReceiveStyle.ID"/>
          <Filter Name="Departments" MapProperty="TransVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="TransVoucherDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="TransVoucherDTO.TransDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="TransVoucherDTO.TransDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="TransVoucherDTO.IdInWarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="TransVoucherDTO.TransDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="TransVoucherDTO.TransDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="TransVoucherDTO.TotalOutAmount" Title="金额"/>
			<Filter Name="Amount" MapProperty="TransVoucherDTO.TotalOutAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="TransVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="TransVoucherDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>
        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            TransVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				TransVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            TransVoucherDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            TransVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select TransDetailDTO.id from ST_TransVoucher_b TransDetailDTO where TransDetailDTO.idTransVoucherDTO=TransVoucherDTO.id
			  and (abs(TransDetailDTO.InAmount)>0 or abs(TransDetailDTO.OutAmount)>0 or abs(TransDetailDTO.BalanceAmount)>0)
			  )
		  </IsContainZero>
      </SimpleQuery>
      
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="TransVoucherDTO.Ts"  Title="Ts"/>
          <Property Name="TransVoucherDTO.ID"  Title="单据ID"/>
          <Property Name="TransVoucherDTO.idvoucherType" Title="单据类型id"/>
          <Property Name="TransVoucherDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="TransVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
          <Property Name="TransVoucherDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="TransVoucherDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="TransVoucherDTO.BusiType.Name" Title="业务类型Name"/>
          <Property Name="TransVoucherDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="TransVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="TransVoucherDTO.Code" Title="单据编号"/>
          <Property Name="TransVoucherDTO.Memo" Title="备注"/>
          <Property Name="TransVoucherDTO.iddepartment" Title="部门ID"/>
          <Property Name="TransVoucherDTO.Department.Id" Title="部门ID"/>
          <Property Name="TransVoucherDTO.Department.Code" Title="部门编码"/>
          <Property Name="TransVoucherDTO.Department.Name" Title="部门名称"/>
          <Property Name="TransVoucherDTO.idclerk" Title="人员ID"/>
          <Property Name="TransVoucherDTO.Clerk.Id" Title="人员ID"/>
          <Property Name="TransVoucherDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="TransVoucherDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="TransVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="TransVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="TransVoucherDTO.idproject" Title="项目"/>
          <Property Name="TransVoucherDTO.idoutWarehouse" Title="调出仓库"/>
          <Property Name="TransVoucherDTO.idinWarehouse" Title="调入仓库"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="TransVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="TransDetails" DTO="TransDetailDTO" FK="idtransVoucherDTO" Title="调拨单明细">
            <Property Name="TransDetailDTO.ID"  Title="ID"/>
            <Property Name="TransDetailDTO.Ts"  Title="Ts"/>
            <Property Name="TransDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="TransDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="TransDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="TransDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="TransDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="TransDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="TransDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="TransDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>    
            <Property Name="TransDetailDTO.idinOfInvLocation"  Title="调入货位"/>
            <Property Name="TransDetailDTO.idoutOfInvLocation"  Title="调出货位"/>
            <Property Name="TransDetailDTO.idproject"  Title="项目"/>
			<Property Name="TransDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="TransDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="TransDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="TransDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="TransDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="TransDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="TransDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="TransDetailDTO.OutAmount"  Title="调出金额"/>
            <Property Name="TransDetailDTO.InAmount"  Title="调入金额"/>
            <Property Name="TransDetailDTO.BalanceAmount"  Title="差异金额"/>
            <Property Name="TransDetailDTO.BaseQuantity"  Title="主计量数量"/>
			<Property Name="TransDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="TransDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="TransDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="TransDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="TransDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="TransDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="TransDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="TransDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.TransVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="{Null}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{Null}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--业务类型——同价调拨 begin-->
        <!--借:原材料/自制半成品/库存商品 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料/自制半成品/库存商品 存货科目,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="InAmount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="InAmount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="InAmount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="TransVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="TransVoucher.IdinWarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="TransVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="TransVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="TransVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="TransVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="TransVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="TransVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="TransVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="TransVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="TransVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="TransVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="TransVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="TransVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="TransVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="TransVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="TransVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="TransVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="TransVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="Idbusitype" SourceVoucher="TransVoucher.IdbusiType"/>
            <Property Doc="IdinRdStyle" SourceVoucher="TransVoucher.IdreceiveStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="TransVoucher.IdinWarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="TransVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="TransVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:原材料/自制半成品/库存商品 存货科目 end-->
        <!--贷:原材料/自制半成品/库存商品 存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/自制半成品/库存商品 存货科目,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="OutAmount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="OutAmount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="OutAmount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="TransVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="TransVoucher.IdoutWarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="TransVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="TransVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="TransVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="TransVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="TransVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="TransVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="TransVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="TransVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="TransVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="TransVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="TransVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="TransVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="TransVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="TransVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="TransVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="TransVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="TransVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="Idbusitype" SourceVoucher="TransVoucher.IdbusiType"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="TransVoucher.IddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="TransVoucher.IdoutWarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="TransVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="TransVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/自制半成品/库存商品 存货科目 end-->
        <!--业务类型——同价调拨 end-->

        <!--业务类型——异价调拨 begin-->
        <!--借:原材料/自制半成品/库存商品 存货科目 同上 -->
        <!--贷:原材料/自制半成品/库存商品 存货科目 同上-->
        <!--贷:调拔差异   存货对方科目 begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="调拔差异,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="BalanceAmount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="BalanceAmount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="BalanceAmount" Title="外币"/>
            <Property Doc="Memoto" SourceVoucher="TransVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="TransVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="TransVoucher.IdbusiType"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="TransVoucher.Iddepartment"/>
			  <ExtendRuleProperty Name="IdrdStyle" SourceVoucherProperty="TransVoucher.IddispatchStyle" Title="出库类别"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="TransVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="TransVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="TransVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="TransVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="TransVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="TransVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="TransVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="TransVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="TransVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="TransVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="TransVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="TransVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="TransVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="TransVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="TransVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="TransVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="TransVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="Idbusitype" SourceVoucher="TransVoucher.IdbusiType"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="TransVoucher.IddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="TransVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="TransVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:调拔差异   存货对方科目 end-->
        <!--业务类型——异价调拨 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackTransVoucher"/>
    </Voucher>
    <!--调拨单 end-->
    
    <!--组装拆卸单 begin-->
    <Voucher Code="ST1034" Name="AssemDetachVoucherDTO" Title="组装拆卸单">
      <SimpleQuery Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="AssemDetachVoucherDTO.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="AssemDetachVoucherDTO.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="AssemDetachVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="AssemDetachVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="AssemDetachVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdoutRdStyle" MapProperty="AssemDetachVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="IdinRdStyle" MapProperty="AssemDetachVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="AssemDetachVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="AssemDetachVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idproject" MapProperty="AssemDetachVoucherDTO.idproject" Title="项目"/>

			<Property Name="OrigAmount" MapProperty="AssemDetachVoucherDTO.Expense" Title="金额"/>
			<Property Name="Amount" MapProperty="AssemDetachVoucherDTO.Expense" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="AssemDetachVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="AssemDetachVoucherDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="AssemDetachVoucherDTO.DispatchStyle.ID"/>
          <Filter Name="InRdStyles" MapProperty="AssemDetachVoucherDTO.ReceiveStyle.ID"/>
          <Filter Name="Departments" MapProperty="AssemDetachVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="AssemDetachVoucherDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="AssemDetachVoucherDTO.AssemDetachDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="AssemDetachVoucherDTO.AssemDetachDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="AssemDetachVoucherDTO.AssemDetachDetails.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="AssemDetachVoucherDTO.AssemDetachDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="AssemDetachVoucherDTO.AssemDetachDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="AssemDetachVoucherDTO.Expense" Title="金额"/>
			<Filter Name="Amount" MapProperty="AssemDetachVoucherDTO.Expense" Title="本币金额"/>
	<Filter Name="maker" MapProperty="AssemDetachVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="AssemDetachVoucherDTO.auditorid"  Title="审核人"/>
		</PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            AssemDetachVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            AssemDetachVoucherDTO.DocId IS NULL
          </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            AssemDetachVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate  {IdvoucherType}-->
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				AssemDetachVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="组装拆卸单生成的其他出入库单未生成凭证且生效，组装拆卸单可生成凭证”">
            AssemDetachVoucherDTO.id in
            (
            select sourcevoucherid from
            (select sourcevoucherid from ST_RdRecord RdRecordDTO
            where idvouchertype='21EA9921-40C1-46EB-BF55-2DF64C7CDDFB'
            and RdRecordDTO.idsourceVoucherType={IdvoucherType}
            and VoucherState='CB61249F-8222-44E0-B177-61FBC108AB61'
            and docid is null) as a
            where a.sourcevoucherid in
            (select sourcevoucherid from ST_RdRecord RdRecordDTO
            where idvouchertype='71778230-49C1-4C8A-8AFB-1C462CDFB3ED'
            and RdRecordDTO.idsourceVoucherType={IdvoucherType}
            and VoucherState='CB61249F-8222-44E0-B177-61FBC108AB61'
            and docid is null)
            )
          </Filter>
          <Filter Name="系统选项为形态转换单生成凭证">
            (select value from EAP_AccInformation where name='AssemDetachToGL')=0
          </Filter>
	  </BusinessFilters>
	  <IsContainZero Name="明细金额全为0不显示">
		  Exists
		  (
		  select AssemDetachDetailDTO.id from ST_AssemDetachVoucher_b AssemDetachDetailDTO where AssemDetachDetailDTO.idAssemDetachVoucherDTO=AssemDetachVoucherDTO.id
		  and (abs(ISNULL(AssemDetachDetailDTO.Amount,0))>0 or abs(ISNULL(AssemDetachVoucherDTO.Expense,0))>0)
		  )
	  </IsContainZero>
      </SimpleQuery>
      
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="AssemDetachVoucherDTO.Ts"  Title="Ts"/>
          <Property Name="AssemDetachVoucherDTO.ID"  Title="单据ID"/>
          <Property Name="AssemDetachVoucherDTO.idvoucherType" Title="单据类型id"/>
          <Property Name="AssemDetachVoucherDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="AssemDetachVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
          <Property Name="AssemDetachVoucherDTO.IdbusiType" Title="业务类型ID"/>
          <Property Name="AssemDetachVoucherDTO.BusiType.Id" Title="业务类型id"/>
          <Property Name="AssemDetachVoucherDTO.BusiType.Name" Title="业务类型Name"/>
          <Property Name="AssemDetachVoucherDTO.BusiType.Code" Title="业务类型Code"/>
          <Property Name="AssemDetachVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="AssemDetachVoucherDTO.Code" Title="单据编号"/>
          <Property Name="AssemDetachVoucherDTO.Memo" Title="备注"/>
          <Property Name="AssemDetachVoucherDTO.iddepartment" Title="部门ID"/>
          <Property Name="AssemDetachVoucherDTO.Department.Id" Title="部门ID"/>
          <Property Name="AssemDetachVoucherDTO.Department.Code" Title="部门编码"/>
          <Property Name="AssemDetachVoucherDTO.Department.Name" Title="部门名称"/>
          <Property Name="AssemDetachVoucherDTO.idclerk" Title="人员ID"/>
          <Property Name="AssemDetachVoucherDTO.Clerk.Id" Title="人员ID"/>
          <Property Name="AssemDetachVoucherDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="AssemDetachVoucherDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="AssemDetachVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="AssemDetachVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="AssemDetachVoucherDTO.idbom" Title="Bom"/>
          <Property Name="AssemDetachVoucherDTO.idproject" Title="项目"/>
			<Property Name="AssemDetachVoucherDTO.Project.ID"  Title="项目"/>
			<Property Name="AssemDetachVoucherDTO.Project.Name"  Title="项目"/>
			<Property Name="AssemDetachVoucherDTO.Project.Code"  Title="项目"/>
			<Property Name="AssemDetachVoucherDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="AssemDetachVoucherDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="AssemDetachVoucherDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="AssemDetachVoucherDTO.Project.Class.Code"  Title="项目分类"/>
          <Property Name="AssemDetachVoucherDTO.DiffAmount" Title="差异金额"/>
          <Property Name="AssemDetachVoucherDTO.Expense" Title="费用金额"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="AssemDetachVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="AssemDetachDetails" DTO="AssemDetachDetailDTO" FK="idassemDetachVoucherDTO" Title="组装拆卸单明细">
            <Property Name="AssemDetachDetailDTO.ID"  Title="ID"/>
            <Property Name="AssemDetachDetailDTO.Ts"  Title="Ts"/>
            <Property Name="AssemDetachDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="AssemDetachDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="AssemDetachDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="AssemDetachDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="AssemDetachDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="AssemDetachDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="AssemDetachDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="AssemDetachDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>     
            <Property Name="AssemDetachDetailDTO.idwarehouse"  Title="仓库"/>            
            <Property Name="AssemDetachDetailDTO.idproject"  Title="项目"/>
			<Property Name="AssemDetachDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="AssemDetachDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="AssemDetachDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="AssemDetachDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="AssemDetachDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="AssemDetachDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="AssemDetachDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="AssemDetachDetailDTO.type"  Title="类型"/>
            <Property Name="AssemDetachDetailDTO.FeeAmount"  Title="费用金额"/>
            <Property Name="AssemDetachDetailDTO.Amount"  Title="总金额"/>
            <Property Name="AssemDetachDetailDTO.BaseQuantity"  Title="主计量数量"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="AssemDetachDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenAssemDetachVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="{Null}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{Null}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        
        <!--业务类型——组装 begin-->
        <!--借:原材料/自制半成品/库存商品(类型：父件) 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料/自制半成品/库存商品(类型：父件),生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="AssemDetachVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AssemDetachVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AssemDetachVoucher.IdClerk"/>
            <Property Doc="Idbusitype" SourceVoucher="AssemDetachVoucher.idbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="AssemDetachVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AssemDetachVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AssemDetachVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="AssemDetachVoucher.iddispatchStyle"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AssemDetachVoucher.idreceiveStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AssemDetachVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AssemDetachVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>        
        <!--借:原材料/自制半成品/库存商品(类型：父件) 存货科目 end -->

	<!--借：差异科目  根据待处理财产损溢科目确定 (需求变更) begin-->
	<TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢,生成借方">
	  <Entry>
	  <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
	  <Account AccountRuleType="PendingAccount">
		  <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="IdvoucherType"/>
		  <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
		  <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="Iddepartment"/>
		  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表头公共自定义字符项1"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表头公共自定义字符项2"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表头公共自定义字符项3"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表头公共自定义字符项4"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="pubuserdefnvc5" Title="表头公共自定义字符项5"/>
		  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="pubuserdefnvc6" Title="表头公共自定义字符项6"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表头公共自定义数值项1"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表头公共自定义数值项2"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表头公共自定义数值项3"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表头公共自定义数值项4"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="pubuserdefdecm5" Title="表头公共自定义数值项5"/>
		  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="pubuserdefdecm6" Title="表头公共自定义数值项6"/>
	</Account>
	</Entry>
	  <Auxiliary>
		  <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
		  <Property Doc="Idperson" SourceVoucher="IdClerk"/>
		  <Property Doc="VoucherCode" SourceVoucher="Code"/>
		  <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
		  <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
		  <Property Doc="IdoutRdStyle" SourceVoucher="iddispatchStyle"/>
		  <Property Doc="IdinRdStyle" SourceVoucher="idreceiveStyle"/>
		  <Property Doc="Idproject" SourceVoucher="Idproject"/>
		  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
	  </Auxiliary>
	  <SourceRelation>
		  <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
		  <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
	  </SourceRelation>
	</TransactionEntry>
	<!--借：差异科目  根据待处理财产损溢科目确定 (需求变更)end-->
        
        <!--贷：原材料(子件)  存货科目  begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料(子件)，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Amount" Title="借方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Amount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Amount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="AssemDetachVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="AssemDetachVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="AssemDetachVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="AssemDetachVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="AssemDetachVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="AssemDetachVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="AssemDetachVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="AssemDetachVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="Idbusitype" SourceVoucher="AssemDetachVoucher.IdbusiType"/>
            <Property Doc="IdinRdStyle" SourceVoucher="AssemDetachVoucher.IdreceiveStyle"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="AssemDetachVoucher.IddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="AssemDetachVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="AssemDetachVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：原材料(子件)  存货科目  end-->

        <!--贷：相关费用  存货对方科目  begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="相关费用,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="Expense" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="Expense" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="Expense" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="IdbusiType"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="Iddepartment"/>
			  <ExtendRuleProperty Name="IdrdStyle" SourceVoucherProperty="IddispatchStyle" Title="出库类别"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="pubuserdefdecm6" Title="表头公共自定义数值项6"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="Code"/>
            <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
            <Property Doc="Idbusitype" SourceVoucher="IdbusiType"/>
            <Property Doc="IdinRdStyle" SourceVoucher="IdreceiveStyle"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="IddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
		<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
		<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：相关费用  存货对方科目  end-->        
        <!--业务类型——组装 end-->
        
        
        <!--业务类型——拆卸 begin-->
        <!--借:原材料/自制半成品/库存商品（子件） 存货科目 同上-->       

        <!--借:损失科目 组装拆卸中转科目 begin-->
        <TransactionEntry Code="" DCDirection="Debit" Name="">
          <Entry>
            <Property Doc="" SourceVoucher=""/>

            <Account AccountRuleType="">
              <ExtendRuleProperty Name="" SourceVoucherProperty=""/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="" SourceVoucher=""/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="" SourceVoucher=""/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:损失科目 组装拆卸中转科目  end-->

        <!-- 贷:原材料/自制半成品/库存商品（父件） 存货科目  同上-->        

        <!--贷：相关费用  存货对方科目  同上-->     

        <!--业务类型——拆卸 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackAssemDetachVoucher"/>
    </Voucher>
    <!--组装拆卸单 end-->


    <!--形态转换单 begin-->
    <Voucher Code="ST1033" Name="ShapeVoucherDTO" Title="形态转换单">
      <SimpleQuery Title= "简单查询设置" Type="UFIDA.T.UA.ST.FC.SimpleQuery_ShapeVoucher">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="ShapeVoucherDTO.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="VoucherDate" MapProperty="ShapeVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="ShapeVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="ShapeVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdoutRdStyle" MapProperty="ShapeVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="IdinRdStyle" MapProperty="ShapeVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="ShapeVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="ShapeVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idproject" MapProperty="ShapeVoucherDTO.idproject" Title="项目"/>

	  <Property Name="OrigAmount" MapProperty="ShapeVoucherDTO.TotalAfterAmount" Title="金额"/>
	  <Property Name="Amount" MapProperty="ShapeVoucherDTO.TotalAfterAmount" Title="本币金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="ShapeVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="ShapeVoucherDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="ShapeVoucherDTO.DispatchStyle.ID"/>
          <Filter Name="InRdStyles" MapProperty="ShapeVoucherDTO.ReceiveStyle.ID"/>
          <Filter Name="Departments" MapProperty="ShapeVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="ShapeVoucherDTO.Clerk.ID"/>
			<Filter Name="OrigAmount" MapProperty="ShapeVoucherDTO.TotalAfterAmount" Title="金额"/>
			<Filter Name="Amount" MapProperty="ShapeVoucherDTO.TotalAfterAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="ShapeVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="ShapeVoucherDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            ShapeVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
	  <Filter Name="所属营销机构 !=“总部”的单据不生成凭证">ShapeVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'</Filter>
          <Filter Name="已生成凭证的业务单据不生成">  ShapeVoucherDTO.DocId IS NULL  </Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            ShapeVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="形态转换单生成的其他出入库单未生成凭证且生效，形态转换单可生成凭证">
            ShapeVoucherDTO.id in
            (
            select sourcevoucherid from
            (select sourcevoucherid from ST_RdRecord RdRecordDTO
            where idvouchertype='21EA9921-40C1-46EB-BF55-2DF64C7CDDFB'
            and RdRecordDTO.idsourceVoucherType={IdvoucherType}
            and VoucherState='CB61249F-8222-44E0-B177-61FBC108AB61'
            and docid is null) as a
            where a.sourcevoucherid in
            (select sourcevoucherid from ST_RdRecord RdRecordDTO
            where idvouchertype='71778230-49C1-4C8A-8AFB-1C462CDFB3ED'
            and RdRecordDTO.idsourceVoucherType={IdvoucherType}
            and VoucherState='CB61249F-8222-44E0-B177-61FBC108AB61'
            and docid is null)
            )
          </Filter>          
          <Filter Name="系统选项为形态转换单生成凭证">
            (select value from EAP_AccInformation where name='ShapeToGL')=0
          </Filter>
	  </BusinessFilters>
	  <IsContainZero Name="明细金额全为0不显示">
		  Exists
		  (
		  select ShapeDetailDTO.id from ST_ShapeVoucher_b ShapeDetailDTO where ShapeDetailDTO.idshapeVoucher=ShapeVoucherDTO.id
		  and abs(ShapeDetailDTO.Amount + ISNULL(ShapeDetailDTO.FeeAmount,0))>0
		  )
	  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
          <Property Name="ShapeVoucherDTO.Ts"  Title="Ts"/>
          <Property Name="ShapeVoucherDTO.ID"  Title="单据ID"/>
          <Property Name="ShapeVoucherDTO.idvoucherType" Title="单据类型id"/>
          <Property Name="ShapeVoucherDTO.VoucherType.Id" Title="单据类型id"/>
          <Property Name="ShapeVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
          <Property Name="ShapeVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="ShapeVoucherDTO.Code" Title="单据编号"/>
          <Property Name="ShapeVoucherDTO.Memo" Title="备注"/>
          <Property Name="ShapeVoucherDTO.iddepartment" Title="部门ID"/>
          <Property Name="ShapeVoucherDTO.Department.Id" Title="部门ID"/>
          <Property Name="ShapeVoucherDTO.Department.Code" Title="部门编码"/>
          <Property Name="ShapeVoucherDTO.Department.Name" Title="部门名称"/>
          <Property Name="ShapeVoucherDTO.idclerk" Title="人员ID"/>
          <Property Name="ShapeVoucherDTO.Clerk.Id" Title="人员ID"/>
          <Property Name="ShapeVoucherDTO.Clerk.Code" Title="人员编码"/>
          <Property Name="ShapeVoucherDTO.Clerk.Name" Title="人员名称"/>
          <Property Name="ShapeVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="ShapeVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="ShapeVoucherDTO.idproject" Title="项目"/>
          <Property Name="ShapeVoucherDTO.TotalExpense" Title="费用金额"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
	<Property Name="ShapeVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="AfterShapeDetails" DTO="ShapeDetailDTO" FK="idshapeVoucher" Title="形态转换单转换后明细">
            <Property Name="ShapeDetailDTO.ID"  Title="ID"/>
            <Property Name="ShapeDetailDTO.Ts"  Title="Ts"/>
            <Property Name="ShapeDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="ShapeDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="ShapeDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="ShapeDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="ShapeDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>      
            <Property Name="ShapeDetailDTO.TransformType"  Title="转换类型"/>
            <Property Name="ShapeDetailDTO.idproject"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="ShapeDetailDTO.idwarehouse"  Title="仓库"/>
            <Property Name="ShapeDetailDTO.BaseQuantity"  Title="主计量数量"/>
            <Property Name="ShapeDetailDTO.MaterialAmount"  Title="材料金额"/>
            <Property Name="ShapeDetailDTO.FeeAmount"  Title="费用金额"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
          
          <Detail DetailRuleName="BeforeShapeDetails" DTO="ShapeDetailDTO" FK="idshapeVoucherDTO" Title="形态转换单转换前明细">
            <Property Name="ShapeDetailDTO.ID"  Title="ID"/>
            <Property Name="ShapeDetailDTO.Ts"  Title="Ts"/>
            <Property Name="ShapeDetailDTO.idinventory"  Title="存货ID"/>
            <Property Name="ShapeDetailDTO.Inventory.Id"  Title="存货ID"/>
            <Property Name="ShapeDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="ShapeDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="ShapeDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="ShapeDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>      
            <Property Name="ShapeDetailDTO.TransformType"  Title="转换类型"/>
            <Property Name="ShapeDetailDTO.idproject"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="ShapeDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="ShapeDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="ShapeDetailDTO.idwarehouse"  Title="仓库"/>
            <Property Name="ShapeDetailDTO.BaseQuantity"  Title="主计量数量"/>
            <Property Name="ShapeDetailDTO.MaterialAmount"  Title="材料金额"/>
            <Property Name="ShapeDetailDTO.FeeAmount"  Title="费用金额"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="ShapeDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>         
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenShapeVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="{Null}" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="{Null}" Title="业务类型"/>
          <Property Name="Partner" Mapping="{Null}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{Null}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>

        <!--借:原材料/自制半成品/库存商品 存货科目 begin-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料/自制半成品/库存商品,生成借方">
          <Entry>
            <Property Doc="QuantityDr" SourceVoucher="BaseQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="ShapeVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
			  <ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
			  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="ShapeVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="ShapeVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="ShapeVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="ShapeVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="ShapeVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="ShapeVoucher.iddispatchStyle"/>
            <Property Doc="IdinRdStyle" SourceVoucher="ShapeVoucher.idreceiveStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
		<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
		<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
		<Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ShapeVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="ShapeVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:原材料/自制半成品/库存商品 存货科目 end-->
	<!--借：差异科目  根据待处理财产损溢科目确定 (需求变更) begin-->
	<TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢,生成借方">
			  <Entry>
				  <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
				  <Account AccountRuleType="PendingAccount">
					  <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="IdvoucherType"/>
					  <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
					  <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="Iddepartment"/>
					  <ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表头公共自定义字符项1"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表头公共自定义字符项2"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表头公共自定义字符项3"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表头公共自定义字符项4"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="pubuserdefnvc5" Title="表头公共自定义字符项5"/>
					  <ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="pubuserdefnvc6" Title="表头公共自定义字符项6"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表头公共自定义数值项1"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表头公共自定义数值项2"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表头公共自定义数值项3"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表头公共自定义数值项4"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="pubuserdefdecm5" Title="表头公共自定义数值项5"/>
					  <ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				</Account>
			  </Entry>
			  <Auxiliary>
				  <Property Doc="Iddepartment" SourceVoucher="Iddepartment"/>
				  <Property Doc="Idperson" SourceVoucher="IdClerk"/>
				  <Property Doc="VoucherCode" SourceVoucher="Code"/>
				  <Property Doc="VoucherDate" SourceVoucher="VoucherDate"/>
				  <Property Doc="IdvoucherType" SourceVoucher="IdvoucherType" Title="单据类型"/>
				  <Property Doc="IdoutRdStyle" SourceVoucher="iddispatchStyle"/>
				  <Property Doc="IdinRdStyle" SourceVoucher="idreceiveStyle"/>
				  <Property Doc="Idproject" SourceVoucher="Idproject"/>
				  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
			  </Auxiliary>
			  <SourceRelation>
				  <Property Doc="SourceVoucherId" SourceVoucher="ID"/>
				  <Property Doc="SourceVoucherTs" SourceVoucher="Ts"/>
			  </SourceRelation>
		  </TransactionEntry>
		<!--借：差异科目  根据待处理财产损溢科目确定 (需求变更)end-->

        <!--贷:制造费用/管理费用 存货对方科目 begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="制造费用/管理费用,生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="FeeAmount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="FeeAmount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="FeeAmount" Title="金额"/>
            <Property Doc="Memoto" SourceVoucher="Memo" Title="备注"/>
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="ShapeVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="ShapeVoucher.Iddepartment"/>
			  <ExtendRuleProperty Name="IdrdStyle" SourceVoucherProperty="ShapeVoucher.IddispatchStyle" Title="出库类别"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
		<Property Doc="Iddepartment" SourceVoucher="ShapeVoucher.Iddepartment"/>
		<Property Doc="Idperson" SourceVoucher="ShapeVoucher.IdClerk"/>
		<Property Doc="VoucherCode" SourceVoucher="ShapeVoucher.Code"/>
		<Property Doc="VoucherDate" SourceVoucher="ShapeVoucher.VoucherDate"/>
		<Property Doc="IdvoucherType" SourceVoucher="ShapeVoucher.IdvoucherType" Title="单据类型"/>
		<Property Doc="IdinRdStyle" SourceVoucher="ShapeVoucher.IdreceiveStyle"/>
		<Property Doc="IdoutRdStyle" SourceVoucher="ShapeVoucher.IddispatchStyle"/>
        	<Property Doc="Idproject" SourceVoucher="Idproject"/>
		<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
		<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
		<Property Doc="Idwarehouse" SourceVoucher="idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
			<Property Doc="SourceVoucherId" SourceVoucher="ShapeVoucher.ID"/>
			<Property Doc="SourceVoucherTs" SourceVoucher="ShapeVoucher.Ts"/>
			  <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
			  <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:制造费用 / 管理费用 存货对方科目 end-->
        <!--贷:原材料/自制半成品/库存商品 存货科目 begin-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/自制半成品/库存商品,生成贷方">
          <Entry>
            <Property Doc="QuantityCr" SourceVoucher="BaseQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="ShapeVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="Idwarehouse"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="ShapeVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="ShapeVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="ShapeVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="ShapeVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="ShapeVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="ShapeVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="ShapeVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="ShapeVoucher.iddispatchStyle"/>
            <Property Doc="IdinRdStyle" SourceVoucher="ShapeVoucher.idreceiveStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="ShapeVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="ShapeVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/自制半成品/库存商品 存货科目 end-->

      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackShapeVoucher"/>
    </Voucher>
    <!--形态转换单 end-->

    <!--盘点单 begin-->
    <Voucher Code="ST1032" Name="CheckVoucherDTO" Title="盘点单">
      <SimpleQuery Title= "简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置-->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="Id" />
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="CheckVoucherDTO.ID" Title="单据Id"/>
          <Property Name="VoucherDate" MapProperty="CheckVoucherDTO.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="CheckVoucherDTO.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="CheckVoucherDTO.Ts" Title="单据时间戳"/>
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型"/>
          <Property Name="IdoutRdStyle" MapProperty="CheckVoucherDTO.iddispatchStyle" Title="出库类别"/>
          <Property Name="IdinRdStyle" MapProperty="CheckVoucherDTO.idreceiveStyle" Title="入库类别"/>
          <Property Name="Iddepartment" MapProperty="CheckVoucherDTO.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="CheckVoucherDTO.idclerk" Title="人员"/>
          <Property Name="Idproject" MapProperty="CheckVoucherDTO.idproject" Title="项目"/>

			<Property Name="OrigAmount" MapProperty="CheckVoucherDTO.TotalBalanceAmount" Title="金额"/>
			<Property Name="Amount" MapProperty="CheckVoucherDTO.TotalBalanceAmount" Title="本币金额"/>
        </Fields>
        <PropertyFilters>
          <Filter Name="VoucherDate" MapProperty="CheckVoucherDTO.VoucherDate"/>
          <Filter Name="VoucherCode" MapProperty="CheckVoucherDTO.Code"/>
          <Filter Name="OutRdStyles" MapProperty="CheckVoucherDTO.DispatchStyle.ID"/>
          <Filter Name="InRdStyles" MapProperty="CheckVoucherDTO.ReceiveStyle.ID"/>
          <Filter Name="Warehouses" MapProperty="CheckVoucherDTO.Warehouse.ID"/>
          <Filter Name="Departments" MapProperty="CheckVoucherDTO.Department.ID"/>
          <Filter Name="Persons" MapProperty="CheckVoucherDTO.Clerk.ID"/>

          <Filter Name="InventoryCode" MapProperty="CheckVoucherDTO.CheckDetails.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="CheckVoucherDTO.CheckDetails.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Projects" MapProperty="CheckVoucherDTO.CheckDetails.Idproject" Title="项目"/>
		  <Filter Name="ProjectClass" MapProperty="CheckVoucherDTO.CheckDetails.Project.Idclass" Title="项目分类"/>
			<Filter Name="OrigAmount" MapProperty="CheckVoucherDTO.TotalBalanceAmount" Title="金额"/>
			<Filter Name="Amount" MapProperty="CheckVoucherDTO.TotalBalanceAmount" Title="本币金额"/>
	<Filter Name="maker" MapProperty="CheckVoucherDTO.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="CheckVoucherDTO.auditorid"  Title="审核人"/>
        </PropertyFilters>
        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            CheckVoucherDTO.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="已生成凭证的业务单据不生成">
            CheckVoucherDTO.DocId IS NULL
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				CheckVoucherDTO.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="该模块启用期间之前的期初单据不生成">
            CheckVoucherDTO.VoucherDate>={ModelOpeningDate}      <!--根据模块进行区分，标志为模块代码加BeginDate-->
          </Filter>
          <Filter Name="盘点单生成的其他出入库单未生成凭证且生效，盘点单可生成凭证">
            CheckVoucherDTO.id not in
            (select sourcevoucherid from ST_RdRecord
            where idvouchertype in ('21EA9921-40C1-46EB-BF55-2DF64C7CDDFB','71778230-49C1-4C8A-8AFB-1C462CDFB3ED')
            and idsourceVoucherType={IdvoucherType}
            and (VoucherState!='CB61249F-8222-44E0-B177-61FBC108AB61' or docid is not null)
            )
          </Filter>          
          <Filter name="盘平的盘点单不查出来">
            CheckVoucherDTO.id in
            (
            select ST_CheckVoucher_b.idcheckVoucherDTO from ST_CheckVoucher_b where ST_CheckVoucher_b.BalanceQuantity!=0
            )
          </Filter>
          <Filter Name="系统选项为盘点单生成凭证">
            (select value from EAP_AccInformation where name='CheckBusinessToGL')=0
          </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select CheckDetailDTO.id from ST_CheckVoucher_b CheckDetailDTO where CheckDetailDTO.idCheckVoucherDTO=CheckVoucherDTO.id
			  and abs(ISNULL(CheckDetailDTO.BalanceAmount,0))>0
			  )
		  </IsContainZero>
      </SimpleQuery>      
      <FullQuery Name="完整查询设置" Type="Ufida.T.SM.FC.AbstractFullQuery">
        <Header>
			<Property Name="CheckVoucherDTO.ID"  Title="单据ID"/>
			<Property Name="CheckVoucherDTO.Ts"  Title="Ts"/>
			<Property Name="CheckVoucherDTO.idvoucherType" Title="单据类型id"/>
			<Property Name="CheckVoucherDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="CheckVoucherDTO.VoucherType.Code" Title="单据类型Code"/>
			<Property Name="CheckVoucherDTO.VoucherDate" Title="单据日期"/>
			<Property Name="CheckVoucherDTO.Code" Title="单据编号"/>
			<Property Name="CheckVoucherDTO.Memo" Title="备注"/>
			<Property Name="CheckVoucherDTO.iddepartment" Title="部门id"/>
			<Property Name="CheckVoucherDTO.Department.Id" Title="部门id"/>
			<Property Name="CheckVoucherDTO.Department.Code" Title="部门编码"/>
			<Property Name="CheckVoucherDTO.Department.Name" Title="部门名称"/>
			<Property Name="CheckVoucherDTO.idclerk" Title="人员id"/>
			<Property Name="CheckVoucherDTO.Clerk.Id" Title="人员id"/>
			<Property Name="CheckVoucherDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="CheckVoucherDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="CheckVoucherDTO.idproject" Title="项目"/>
			<Property Name="CheckVoucherDTO.Idwarehouse" Title="仓库"/>
			<Property Name="CheckVoucherDTO.idreceiveStyle" Title="入库类别"/>
			<Property Name="CheckVoucherDTO.iddispatchStyle" Title="出库类别"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="CheckVoucherDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="CheckDetails" DTO="CheckDetailDTO" FK="idcheckVoucherDTO" Title="盘点单明细">
            <Property Name="CheckDetailDTO.ID"  Title="ID"/>
            <Property Name="CheckDetailDTO.Ts"  Title="Ts"/>
            <Property Name="CheckDetailDTO.idinventory"  Title="存货id"/>
            <Property Name="CheckDetailDTO.Inventory.Id"  Title="存货id"/>
            <Property Name="CheckDetailDTO.Inventory.Code"  Title="存货编码"/>
            <Property Name="CheckDetailDTO.Inventory.Name"  Title="存货名称"/>
            <Property Name="CheckDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="CheckDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="CheckDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="CheckDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>      
            <Property Name="CheckDetailDTO.idbaseUnit"  Title="计量单位id"/>
            <Property Name="CheckDetailDTO.Unit.Id"  Title="计量单位id"/>
            <Property Name="CheckDetailDTO.Unit.ChangeType.Id"  Title="换算类型"/>
            <Property Name="CheckDetailDTO.Unit.ChangeType1.Id"  Title="换算类型1"/>
            <Property Name="CheckDetailDTO.Unit.IsMainUnit"  Title="是否主计量"/>
            <Property Name="CheckDetailDTO.Unit.IsSingleUnit"  Title="是否单计量"/>
            <Property Name="CheckDetailDTO.Unit.ChangeRate"  Title="换算率"/>
            <Property Name="CheckDetailDTO.idinvLocation"  Title="货位"/>
            <Property Name="CheckDetailDTO.InvLocation.Id"  Title="货位"/>
            <Property Name="CheckDetailDTO.idproject"  Title="项目"/>
			<Property Name="CheckDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="CheckDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="CheckDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="CheckDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="CheckDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="CheckDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="CheckDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="CheckDetailDTO.AmountInStock"  Title="帐面金额"/>
            <Property Name="CheckDetailDTO.Amount"  Title="盘点金额"/>
            <Property Name="CheckDetailDTO.BalanceAmount"  Title="盈亏金额"/>
            <Property Name="CheckDetailDTO.BaseBalanceQuantity"  Title="主盈亏数量"/>
            <Property Name="CheckDetailDTO.SubBalanceQuantity"  Title="辅盈亏数量"/>
			<Property Name="CheckDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="CheckDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="CheckDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="CheckDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="CheckDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="CheckDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="CheckDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="CheckDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>
      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGenCheckVoucher">
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="{NULL}" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="{NULL}" Title="业务类型"/>
          <Property Name="Partner" Mapping="{Null}" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="{Null}" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>        
        <!--借:原材料/自制半成品/库存商品 存货科目 begin--><!--盈亏数量>0（注：对于固定换算率来说用主计量来判断，对于浮动换算率来说，两个计量单位均进行判断）-->
        <TransactionEntry Code="DebitFromInventory" DCDirection="Debit" Name="原材料/自制半成品/库存商品,生成借方">
          <Entry>
            <Property Doc="OrigAmountDr" SourceVoucher="BalanceAmount" Title="借方原币"/>
            <Property Doc="AmountDr" SourceVoucher="BalanceAmount" Title="借方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="BalanceAmount" Title="外币"/>
            <Property Doc="QuantityDr" SourceVoucher="BaseBalanceQuantity" Title="借方数量"/>
            <Property Doc="Memoto" SourceVoucher="CheckVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
				<ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
				<ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
				<ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
				<ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
				<ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="CheckVoucher.Idwarehouse"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="CheckVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="CheckVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="CheckVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="CheckVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="CheckVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="CheckVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="CheckVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="CheckVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="CheckVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="CheckVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="CheckVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="CheckVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="CheckVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="CheckVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="CheckVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="CheckVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="CheckVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="CheckVoucher.idreceiveStyle"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="CheckVoucher.iddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
			<Property Doc="Idwarehouse" SourceVoucher="CheckVoucher.Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="CheckVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="CheckVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:原材料/自制半成品/库存商品 存货科目 end-->
        
        <!--贷:待处理财产损溢 根据其他入库单对应的待处理财产损溢科目确定 begin-->
        <TransactionEntry Code="CreditFromPendingAccount" DCDirection="Credit" Name="待处理财产损溢，生成贷方">
          <Entry>
            <Property Doc="OrigAmountCr" SourceVoucher="BalanceAmount" Title="贷方原币"/>
            <Property Doc="AmountCr" SourceVoucher="BalanceAmount" Title="贷方本币"/>
            <Property Doc="OrigAmount" SourceVoucher="BalanceAmount" Title="外币"/>
            <Property Doc="QuantityCr" SourceVoucher="BaseBalanceQuantity" Title="贷方数量"/>
            <Property Doc="Memoto" SourceVoucher="CheckVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="CheckVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="CheckVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="CheckVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="CheckVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="CheckVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="CheckVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="CheckVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="CheckVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="CheckVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="CheckVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="CheckVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="CheckVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="CheckVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="CheckVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="CheckVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="CheckVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="CheckVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="CheckVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="CheckVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="CheckVoucher.idreceiveStyle"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="CheckVoucher.iddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
			<Property Doc="Idwarehouse" SourceVoucher="CheckVoucher.Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="CheckVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="CheckVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:待处理财产损溢 根据其他入库单对应的待处理财产损溢科目确定 end-->

        <!--借:待处理财产损溢 根据其他入库单对应的待处理财产损溢科目确定 begin-->
        <TransactionEntry Code="DebitFromPendingAccount" DCDirection="Debit" Name="待处理财产损溢,生成借方">
          <Entry>
            <Property Doc="Memoto" SourceVoucher="CheckVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="PendingAccount">
              <ExtendRuleProperty Name="IdvoucherType" SourceVoucherProperty="CheckVoucher.IdvoucherType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="CheckVoucher.Iddepartment"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="CheckVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="CheckVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="CheckVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="CheckVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="CheckVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="CheckVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="CheckVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="CheckVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="CheckVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="CheckVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="CheckVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="CheckVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            	<Property Doc="Iddepartment" SourceVoucher="CheckVoucher.Iddepartment"/>
            	<Property Doc="Idperson" SourceVoucher="CheckVoucher.IdClerk"/>
            	<Property Doc="VoucherCode" SourceVoucher="CheckVoucher.Code"/>
            	<Property Doc="VoucherDate" SourceVoucher="CheckVoucher.VoucherDate"/>
            	<Property Doc="IdvoucherType" SourceVoucher="CheckVoucher.IdvoucherType" Title="单据类型"/>
            	<Property Doc="IdinRdStyle" SourceVoucher="CheckVoucher.idreceiveStyle"/>
            	<Property Doc="IdoutRdStyle" SourceVoucher="CheckVoucher.iddispatchStyle"/>
            	<Property Doc="Idproject" SourceVoucher="Idproject"/>
            	<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
		<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
		<Property Doc="Idwarehouse" SourceVoucher="CheckVoucher.Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="CheckVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="CheckVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借:待处理财产损溢 根据其他入库单对应的待处理财产损溢科目确定 end-->
        
        <!--贷:原材料/自制半成品/库存商品 存货科目 begin--><!--盈亏数量<0（注：对于固定换算率来说用主计量来判断，对于浮动换算率来说，两个计量单位均进行判断）。-->
        <TransactionEntry Code="CreditFromInventory" DCDirection="Credit" Name="原材料/自制半成品/库存商品,生成贷方">
          <Entry>
            <Property Doc="Memoto" SourceVoucher="CheckVoucher.Memo" Title="备注"/>
            <Account AccountRuleType="Inventory">
              <!--存货科目扩展-->
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
				<ExtendRuleProperty Name="Idwarehouse"  SourceVoucherProperty="CheckVoucher.Idwarehouse"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="CheckVoucher.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="CheckVoucher.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="CheckVoucher.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="CheckVoucher.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="CheckVoucher.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="CheckVoucher.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="CheckVoucher.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="CheckVoucher.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="CheckVoucher.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="CheckVoucher.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="CheckVoucher.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="CheckVoucher.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="CheckVoucher.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="CheckVoucher.IdClerk"/>
            <Property Doc="VoucherCode" SourceVoucher="CheckVoucher.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="CheckVoucher.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="CheckVoucher.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdinRdStyle" SourceVoucher="CheckVoucher.idreceiveStyle"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="CheckVoucher.iddispatchStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
			<Property Doc="Idwarehouse" SourceVoucher="CheckVoucher.Idwarehouse"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="CheckVoucher.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="CheckVoucher.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:原材料/自制半成品/库存商品 存货科目 end-->
        
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBackCheckVoucher"/>
    </Voucher>
    <!--盘点单 end-->

    <!--先销货后出库的出库单回冲成本 begin-->
    <Voucher Code="sd_SaleDispatchCancelCost" Name="RDRecordDTO" Title="先销货后出库的出库单回冲成本" IsClosingAccountCarryForward="true">
      <SimpleQuery Name="RDRecordDetailDTO" Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecord.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="RDRecord.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecord.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecord.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecord.Ts" Title="单据时间戳"/>
          <Property Name="VoucherDetailId" MapProperty="RDRecordDetailDTO.ID" Title="明细Id"/>
          <Property Name="VoucherDetailTs" MapProperty="RDRecordDetailDTO.TS" Title="明细时间戳"/>
          <!--<Property Name="IdinventoryClass" MapProperty="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>-->
          <Property Name="Idinventory" MapProperty="RDRecordDetailDTO.IdInventory" Title="存货"/>
          <Property Name="IdbaesUnit" MapProperty="RDRecordDetailDTO.IdbaseUnit" Title="主计量"/>
          <Property Name="ExecutedQuantity" MapProperty="RDRecordDetailDTO.BaseQuantity" Title="数量"/>
          <Property Name="Iddepartment" MapProperty="RDRecord.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecord.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="RDRecord.idSettleCustomer" Title="客户"/>
          <Property Name="Idproject" MapProperty="RDRecord.idproject" Title="项目"/>
          <Property Name="CostPrice" MapProperty="RDRecordDetailDTO.Price" Title="成本单价"/>
          <Property Name="CostAmount" MapProperty="RDRecordDetailDTO.Amount" Title="成本金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherCode" MapProperty="RDRecord.Code"/>
          <Filter Name="Departments" MapProperty="RDRecord.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecord.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="RDRecord.SettleCustomer.Code"/>
          <Filter Name="PartnerClass" MapProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
          <Filter Name="Currencys" MapProperty="RDRecord.Currency.ID"/>
          <Filter Name="OutRdStyles" MapProperty="RDRecord.RdStyle.ID"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDetailDTO.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDetailDTO.Idproject" Title="项目"/>
	<Filter Name="ProjectClass" MapProperty="RDRecordDetailDTO.Project.Idclass" Title="项目分类"/>
	<Filter Name="maker" MapProperty="RDRecord.makerid"  Title="制单人"/>
	<Filter Name="auditor" MapProperty="RDRecord.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecord.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="没有期末成本结转过">
            RDRecordDetailDTO.DocId IS NULL
          </Filter>
          <Filter Name="分开流程">
            (select value from EAP_AccInformation where name='SAWorkflow')=1
          </Filter>
          <Filter Name="当前期间内的单据">
            RDRecord.voucherdate between {StartPeriod} and {EndPeriod}
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecord.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="选项“未出库的销货单”=“确认收入并结转成本”">
            (select value from EAP_AccInformation where name='NoDispatchSaleDelivery')=1
          </Filter>
          <Filter Name="销货单记账">
            (select value from EAP_AccInformation where Name='SAAccount') = 0
          </Filter>
          <Filter Name="来源单据类型=销货单">
             (
            Exists(
            select * from ST_RDRecordSourceRelation where idRDRecordDetailDTO = RDRecordDetailDTO.id
            and idsourcevouchertype in('5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16')
            )
            )
          </Filter>
			<Filter Name="来源于以前期间销货单的销售出库单或者来源的销货单已经生成凭证">
			(
			Exists(
			select st_rdrecord_b.id
			from st_rdrecord_b
			inner join ST_RDRecordSourceRelation on ST_RDRecordSourceRelation.idRDRecordDetailDTO=st_rdrecord_b.id
			inner join  sa_saledelivery on ST_RDRecordSourceRelation.sourcevoucherid=sa_saledelivery.id
			inner join  sa_saledelivery_b on ST_RDRecordSourceRelation.sourceVoucherDetailId=sa_saledelivery_b.id
			inner join st_rdrecord on st_rdrecord_b.idrdrecorddto=st_rdrecord.id
			left join GL_Doc on sa_saledelivery_b.docid =GL_Doc.id
			where
			RDRecordDetailDTO.id=st_rdrecord_b.id
			and
			ST_RDRecordSourceRelation.idsourcevouchertype = '5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16'
			and sa_saledelivery_b.docid is not null
			and st_rdrecord.CreatedTime > GL_Doc.createdtime
			and sa_saledelivery.voucherdate between {StartPeriod} and {EndPeriod}
			)
			or Exists(
			select sa_saledelivery.id from sa_saledelivery
			left join ST_RDRecordSourceRelation on ST_RDRecordSourceRelation.sourcevoucherid=sa_saledelivery.id
			left join ST_RDRecord_b on ST_RDRecord_b.id=ST_RDRecordSourceRelation.idRDRecordDetailDTO
			where
			ST_RDRecord_b.id=RDRecordDetailDTO.id
			and
			sa_saledelivery.voucherdate&lt;{StartPeriod} --来源于以前期间销货单的销售出库单
			)
			)
		</Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RDRecord.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="UFIDA.T.UA.ST.FC.FullQuerysd_SaleDispatchCancelCost">
        <Header>
			<Property Name="RDRecordDTO.ID"  Title="单据ID"/>
			<Property Name="RDRecordDTO.Ts"  Title="Ts"/>
			<Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
			<Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
			<Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
			<Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
			<Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
			<Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
			<Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
			<Property Name="RDRecordDTO.Code" Title="单据编号"/>
			<Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
			<Property Name="RDRecordDTO.Currency.ID"  Title="币种"/>
			<Property Name="RDRecordDTO.Currency.Name"  Title="币种名称"/>
			<Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
			<Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
			<Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
			<Property Name="RDRecordDTO.Idclerk" Title=""/>
			<Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
			<Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="RDRecordDTO.idSettleCustomer" Title=""/>
			<Property Name="RDRecordDTO.SettleCustomer.Id" Title="客户Id"/>
			<Property Name="RDRecordDTO.SettleCustomer.Code" Title="客户编码"/>
			<Property Name="RDRecordDTO.SettleCustomer.Name" Title="客户名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.idpartner" Title=""/>
			<Property Name="RDRecordDTO.Partner.Id" Title="往来单位Id"/>
			<Property Name="RDRecordDTO.Partner.Code" Title="往来单位编码"/>
			<Property Name="RDRecordDTO.Partner.Name" Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass" Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.Partner.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDTO.Project.ID"  Title="项目ID"/>
			<Property Name="RDRecordDTO.Project.Name"  Title="项目名称"/>
			<Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
			<Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
			<Property Name="RDRecordDTO.DispatchAddress" Title="地区"/>
			<Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.IdsourceVoucherType"  Title="来源单据ID"/>
			<Property Name="RDRecordDTO.AccountingPeriod"  Title="单据日期所在期间"/>
			<Property Name="RDRecordDTO.AccountingYear"  Title="单据日期所在年度"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="销售出库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.ID"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.Name"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.Code"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.IdProject"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>			  
            <Property Name="RDRecordDetailDTO.IdInventory"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.ID"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.IsSingleUnit" Title="是否是单计量存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Idunit" Title="存货主计量id"/>
            <Property Name="RDRecordDetailDTO.Idunit" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ID" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ChangeType1" Title="计量单位换算类型"/>
            <Property Name="RDRecordDetailDTO.Unit.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Unit2.ID" Title="计量单位2"/>
            <Property Name="RDRecordDetailDTO.Unit2.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Price2" Title="成本价2"/>
            
            <Property Name="RDRecordDetailDTO.SourceVoucherId"  Title="来源单据ID"/>
            <Property Name="RDRecordDetailDTO.SourceVoucherDetailId"  Title="来源明细ID"/>
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Price" Title="成本单价"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="成本金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGensd_SaleDispatchCancelCost">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="SettleCustomer.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="SettleCustomer.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--分录 begin-->
        <!--贷:主营业务成本 销售出库单存货的对方科目 begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="存货对方科目，生成贷方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>             
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass" Title="存货分类"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:主营业务成本 销售出库单存货的对方科目 end-->
        <!--借：发出商品 发出商品科目 begin-->
        <TransactionEntry Code="DebitFromDeliveryInventory" DCDirection="Debit" Name="发出商品科目，生成借方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="DeliveryInventory">
              <!--发出商品科目扩展-->
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
              <ExtendRuleProperty Name="Idpartnerclass" SourceVoucherProperty="RDRecord.SettleCustomer.idpartnerClass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			  <Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷：发出商品 发出商品科目 end-->
        
        <!--分录 end-->
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBacksd_SaleDispatchCancelCost"/>
    </Voucher>
    <!--先销货后出库的出库单回冲成本 end-->

    
    <!--先开票后出库的出库单回冲成本 begin-->   
    <Voucher Code="si_SaleDispatchCancelCost" Name="RDRecordDTO" Title="先开票后出库的出库单回冲成本" IsClosingAccountCarryForward="true">
      <SimpleQuery Name="RDRecordDetailDTO" Title="简单查询设置" Type="Ufida.T.SM.FC.AbstractSimpleQuery">
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,如果没有某个字段设置为NULL-->
        <!--当前单据到FC_DocSimpleSourceVoucher字段的映射,SELECT部分和WHERE部分都需要配置 -->
        <Fields>
          <Property Name="ID" MapProperty="NEWID()" Title="ID"/>
          <Property Name="UserId" MapProperty="{UserId}" Title="UserId" />
          <Property Name="VoucherId" MapProperty="RDRecord.ID" Title="单据Id" />
          <Property Name="IdvoucherType" MapProperty="{IdvoucherType}" Title="单据类型" />
          <Property Name="IdbusiType" MapProperty="RDRecord.idbusiType" Title="业务类型"/>
          <Property Name="VoucherDate" MapProperty="RDRecord.VoucherDate" Title="单据日期"/>
          <Property Name="VoucherCode" MapProperty="RDRecord.Code" Title="单据编号"/>
          <Property Name="VoucherTs" MapProperty="RDRecord.Ts" Title="单据时间戳"/>
          <Property Name="VoucherDetailId" MapProperty="RDRecordDetailDTO.ID" Title="明细Id"/>
          <Property Name="VoucherDetailTs" MapProperty="RDRecordDetailDTO.TS" Title="明细时间戳"/>
          <!--<Property Name="IdinventoryClass" MapProperty="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>-->
          <Property Name="Idinventory" MapProperty="RDRecordDetailDTO.IdInventory" Title="存货"/>
          <Property Name="IdbaesUnit" MapProperty="RDRecordDetailDTO.IdbaseUnit" Title="主计量"/>
          <Property Name="ExecutedQuantity" MapProperty="RDRecordDetailDTO.BaseQuantity" Title="数量"/>
          <Property Name="Iddepartment" MapProperty="RDRecord.iddepartment" Title="部门"/>
          <Property Name="Idclerck" MapProperty="RDRecord.idclerk" Title="人员"/>
          <Property Name="Idcustomer" MapProperty="RDRecord.idSettleCustomer" Title="客户"/>
          <Property Name="Idproject" MapProperty="RDRecord.idproject" Title="项目"/>
          <Property Name="CostPrice" MapProperty="RDRecordDetailDTO.Price" Title="成本单价"/>
          <Property Name="CostAmount" MapProperty="RDRecordDetailDTO.Amount" Title="成本金额"/>
        </Fields>

        <PropertyFilters>
          <Filter Name="VoucherCode" MapProperty="RDRecord.Code"/>
          <Filter Name="Departments" MapProperty="RDRecord.Department.ID"/>
          <Filter Name="Persons" MapProperty="RDRecord.Clerk.ID"/>
          <Filter Name="CustomerCode" MapProperty="RDRecord.SettleCustomer.Code"/>
          <Filter Name="PartnerClass" MapProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
          <Filter Name="Currencys" MapProperty="RDRecord.Currency.ID"/>
          <Filter Name="OutRdStyles" MapProperty="RDRecord.RdStyle.ID"/>

          <Filter Name="InventoryCode" MapProperty="RDRecordDetailDTO.Inventory.Code" Title="存货"/>
          <Filter Name="InventoryClasss" MapProperty="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
          <Filter Name="Warehouses" MapProperty="RDRecordDetailDTO.Idwarehouse" Title="仓库"/>
          <Filter Name="Projects" MapProperty="RDRecordDetailDTO.Idproject" Title="项目"/>
	  <Filter Name="ProjectClass" MapProperty="RDRecordDetailDTO.Project.Idclass" Title="项目分类"/>
	  <Filter Name="maker" MapProperty="RDRecord.makerid"  Title="制单人"/>
	  <Filter Name="auditor" MapProperty="RDRecord.auditorid"  Title="审核人"/>
        </PropertyFilters>

        <!--查询单据的过滤条件，多是不生成凭证过滤条件，也可以添加其他的自定义条件-->
        <BusinessFilters ModeName="Stock">
          <Filter Name="未生效的不生成">
            RDRecord.VoucherState={VoucherState.Effective}
          </Filter>
          <Filter Name="没有期末成本结转过">
            RDRecordDetailDTO.DocId IS NULL
          </Filter>
          <Filter Name="分开流程">
            (select value from EAP_AccInformation where name='SAWorkflow')=1
          </Filter>
          <Filter Name="当前期间内的单据">
            RDRecord.voucherdate between {StartPeriod} and {EndPeriod}
          </Filter>
          <Filter Name="选项“未出库的发票”=“确认收入并结转成本””">
            (select value from EAP_AccInformation where Name='NoDispatchSaleDelivery')=1
          </Filter>
			<Filter Name="所属营销机构 !=“总部”的单据不生成凭证">
				RDRecord.IdmarketingOrgan='4AD74463-E871-4DC1-BEB0-6E6EAA0A6386'
			</Filter>
          <Filter Name="销售发票立帐">
            (select value from EAP_AccInformation where Name='SAAccount') = 1
          </Filter>
          <Filter Name="A=“本期出库数量-本期开票数量”>0，并且B=“上期累计开票数量-上期累计出库数量” >0 ">
			  RDRecordDetailDTO.Id in(
			  select st_rdrecord_b.id from st_rdrecord_b
			  left join ST_RDRecordSourceRelation on ST_RDRecordSourceRelation.idRDRecordDetailDTO=ST_RDRecord_b.id
			  inner join SA_SaleDelivery on SA_SaleDelivery.id=ST_RDRecordSourceRelation.SourceVoucherID
			  where SA_SaleDelivery.voucherDate&lt;{StartPeriod}
			  and ST_RDRecordSourceRelation.sourceVoucherDetailID in(
			  select c.SaleDeliveryDetailID from (
			  (select SaleDeliveryDetailID from (
			  select sourceVoucherDetailId as SaleDeliveryDetailID,SUM(baseQuantity) as InvoiceQuantity,0 as DispatchQuantity
			  from SA_SaleInvoice_b
			  inner join SA_SaleInvoice on SA_SaleInvoice.id=SA_SaleInvoice_b.idSaleInvoiceDTO
			  where SA_SaleInvoice.voucherDate between {StartPeriod} and {EndPeriod}
			  and SA_SaleInvoice_b.idsourcevouchertype in('5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16','201720E7-82F9-4C1F-AEA9-0892A121EACD')
			  group by  sourceVoucherDetailId
			  union all
			  select  ST_RDRecordSourceRelation.sourceVoucherDetailId as SaleDeliveryDetailID,0 as InvoiceQuantity,SUM(st_rdrecord_b.baseQuantity) as DispatchQuantity
			  from st_rdrecord_b
			  left join ST_RDRecordSourceRelation on ST_RDRecordSourceRelation.idRDRecordDetailDTO=ST_RDRecord_b.id
			  inner join st_rdrecord RDRecordDTO on RDRecordDTO.id=st_rdrecord_b.idrdrecorddto
			  where RDRecordDTO.voucherDate between {StartPeriod} and {EndPeriod}
			  and ST_RDRecordSourceRelation.idsourcevouchertype in('5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16','201720E7-82F9-4C1F-AEA9-0892A121EACD')
			  group by  ST_RDRecordSourceRelation.sourceVoucherDetailId
			  )a
			  group by SaleDeliveryDetailID
			  having abs(SUM(InvoiceQuantity))&lt;abs(SUM(DispatchQuantity)))c
            inner join
            (select SaleDeliveryDetailID from (
            select sourceVoucherDetailId as SaleDeliveryDetailID,SUM(baseQuantity) as InvoiceQuantity,0 as DispatchQuantity
            from SA_SaleInvoice_b
            inner join SA_SaleInvoice on SA_SaleInvoice.id=SA_SaleInvoice_b.idSaleInvoiceDTO
            where SA_SaleInvoice.voucherDate&lt;{StartPeriod}
			  and SA_SaleInvoice_b.idsourcevouchertype in('5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16','201720E7-82F9-4C1F-AEA9-0892A121EACD')
			  group by  sourceVoucherDetailId
			  Union All
			  select ST_RDRecordSourceRelation.sourceVoucherDetailId as SaleDeliveryDetailID,0 as InvoiceQuantity,SUM(ST_RDRecord_b.baseQuantity) as DispatchQuantity
			  from ST_RDRecord_b
			  left join ST_RDRecordSourceRelation on ST_RDRecordSourceRelation.idRDRecordDetailDTO=ST_RDRecord_b.id
			  inner join ST_RDRecord RDRecordDTO1 on RDRecordDTO1.id=ST_RDRecord_b.idRDRecordDTO
			  where RDRecordDTO1.voucherDate&lt;{StartPeriod}
			  and ST_RDRecordSourceRelation.idsourcevouchertype in('5794D3DD-7FE4-4B5C-AF53-D21DDC13BF16','201720E7-82F9-4C1F-AEA9-0892A121EACD')
			  group by  ST_RDRecordSourceRelation.sourceVoucherDetailId
			  ) b
			  group by SaleDeliveryDetailID
			  having abs(SUM(InvoiceQuantity))>abs(SUM(DispatchQuantity))) d
			  on c.SaleDeliveryDetailID=d.SaleDeliveryDetailID
			  )
			  )
			  )
		  </Filter>
        </BusinessFilters>
		  <IsContainZero Name="明细金额全为0不显示">
			  Exists
			  (
			  select RDRecordDetailDTO.id from ST_RDRecord_b RDRecordDetailDTO where RDRecordDetailDTO.idRDRecordDTO=RDRecord.id and abs(RDRecordDetailDTO.Amount)>0
			  )
		  </IsContainZero>
      </SimpleQuery>
      <FullQuery Name="完整查询设置" Type="UFIDA.T.UA.ST.FC.FullQuerysi_SaleDispatchCancelCost">
        <Header>
			<Property Name="RDRecordDTO.ID"  Title="单据ID"/>
			<Property Name="RDRecordDTO.Ts"  Title="Ts"/>
			<Property Name="RDRecordDTO.IdvoucherType" Title="单据类型ID"/>
			<Property Name="RDRecordDTO.VoucherType.Id" Title="单据类型id"/>
			<Property Name="RDRecordDTO.VoucherType.Code" Title="单据类型"/>
			<Property Name="RDRecordDTO.IdbusiType" Title="业务类型ID"/>
			<Property Name="RDRecordDTO.BusiType.Id" Title="业务类型id"/>
			<Property Name="RDRecordDTO.BusiType.Name" Title="业务类型"/>
			<Property Name="RDRecordDTO.BusiType.Code" Title="业务类型Code"/>
			<Property Name="RDRecordDTO.VoucherDate" Title="单据日期"/>
			<Property Name="RDRecordDTO.Code" Title="单据编号"/>
			<Property Name="RDRecordDTO.Idcurrency" Title="币种"/>
			<Property Name="RDRecordDTO.Currency.ID"  Title="币种"/>
			<Property Name="RDRecordDTO.Currency.Name"  Title="币种名称"/>
			<Property Name="RDRecordDTO.ExchangeRate" Title="汇率"/>
			<Property Name="RDRecordDTO.iddepartment"  Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Id" Title="部门ID"/>
			<Property Name="RDRecordDTO.Department.Code" Title="部门编码"/>
			<Property Name="RDRecordDTO.Department.Name" Title="部门名称"/>
			<Property Name="RDRecordDTO.Idclerk" Title=""/>
			<Property Name="RDRecordDTO.Clerk.Id" Title="人员id"/>
			<Property Name="RDRecordDTO.Clerk.Code" Title="人员编码"/>
			<Property Name="RDRecordDTO.Clerk.Name" Title="人员名称"/>
			<Property Name="RDRecordDTO.idSettleCustomer" Title=""/>
			<Property Name="RDRecordDTO.SettleCustomer.Id" Title="客户Id"/>
			<Property Name="RDRecordDTO.SettleCustomer.Code" Title="客户编码"/>
			<Property Name="RDRecordDTO.SettleCustomer.Name" Title="客户名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass" Title="客户分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.SettleCustomer.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.SettleCustomer.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.SettleCustomer.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.idpartner" Title=""/>
			<Property Name="RDRecordDTO.Partner.Id" Title="往来单位Id"/>
			<Property Name="RDRecordDTO.Partner.Code" Title="往来单位编码"/>
			<Property Name="RDRecordDTO.Partner.Name" Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass" Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.IdpartnerClass"  Title="往来单位分类id"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.ID"  Title="往来单位分类"/>
			<Property Name="RDRecordDTO.Partner.PartnerClass.Name"  Title="往来单位名称"/>
			<Property Name="RDRecordDTO.Partner.Iddistrict" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Id" Title="地区id"/>
			<Property Name="RDRecordDTO.Partner.District.Name" Title="地区Name"/>
			<Property Name="RDRecordDTO.Partner.District.Code"  Title="地区Code"/>
			<Property Name="RDRecordDTO.Idproject" Title="项目"/>
			<Property Name="RDRecordDTO.Project.ID"  Title="项目ID"/>
			<Property Name="RDRecordDTO.Project.Name"  Title="项目名称"/>
			<Property Name="RDRecordDTO.Idwarehouse" Title="仓库"/>
			<Property Name="RDRecordDTO.IdrdStyle" Title="出库类别"/>
			<Property Name="RDRecordDTO.DispatchAddress" Title="地区"/>
			<Property Name="RDRecordDTO.Memo"  Title="备注"/>
			<Property Name="RDRecordDTO.IdsourceVoucherType"  Title="来源单据ID"/>
			<Property Name="RDRecordDTO.AccountingPeriod"  Title="单据日期所在期间"/>
			<Property Name="RDRecordDTO.AccountingYear"  Title="单据日期所在年度"/>
			<Property Name="RDRecordDTO.pubuserdefnvc1"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc2"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc3"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc4"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc5"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefnvc6"  Title="单据专用字符自定义字符项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm1"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm2"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm3"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm4"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm5"  Title="单据公用字符自定义数值项"/>
			<Property Name="RDRecordDTO.pubuserdefdecm6"  Title="单据公用字符自定义数值项"/>
        </Header>
        <Details>
          <Detail DetailRuleName="RDRecordDetails" DTO="RDRecordDetailDTO" FK="idrDRecordDTO" Title="销售出库单明细">
            <Property Name="RDRecordDetailDTO.ID"  Title="ID"/>
            <Property Name="RDRecordDetailDTO.Ts"  Title="Ts"/>
            <Property Name="RDRecordDetailDTO.Idwarehouse"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.ID"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.Name"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.Warehouse.Code"  Title="仓库"/>
            <Property Name="RDRecordDetailDTO.IdProject"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.ID"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Name"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Code"  Title="项目"/>
			<Property Name="RDRecordDetailDTO.Project.Idclass"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.ID"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Name"  Title="项目分类"/>
			<Property Name="RDRecordDetailDTO.Project.Class.Code"  Title="项目分类"/>
            <Property Name="RDRecordDetailDTO.IdInventory"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.ID"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Name"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Code"  Title="存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.IdinventoryClass" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.ID" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Code" Title="存货分类"/>
            <Property Name="RDRecordDetailDTO.Inventory.InventoryClass.Name" Title="存货分类"/>

            <Property Name="RDRecordDetailDTO.Inventory.IsSingleUnit" Title="是否是单计量存货"/>
            <Property Name="RDRecordDetailDTO.Inventory.Idunit" Title="存货主计量id"/>
            <Property Name="RDRecordDetailDTO.Idunit" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ID" Title="计量单位1"/>
            <Property Name="RDRecordDetailDTO.Unit.ChangeType1" Title="计量单位换算类型"/>
            <Property Name="RDRecordDetailDTO.Unit.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Unit2.ID" Title="计量单位2"/>
            <Property Name="RDRecordDetailDTO.Unit2.IsMainUnit" Title="计量单位1是否是主计量"/>
            <Property Name="RDRecordDetailDTO.Price2" Title="成本价2"/>
            
            <Property Name="RDRecordDetailDTO.SourceVoucherId"  Title="来源单据ID"/>
            <Property Name="RDRecordDetailDTO.SourceVoucherDetailId"  Title="来源明细ID"/>
            <Property Name="RDRecordDetailDTO.InventoryLocation" Title="货位"/>
            <Property Name="RDRecordDetailDTO.Price" Title="成本单价"/>
            <Property Name="RDRecordDetailDTO.Amount" Title="成本金额"/>
            <Property Name="RDRecordDetailDTO.BaseQuantity" Title="数量(主计量)"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc1"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc2"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc3"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefnvc4"  Title="明细专用字符自定义字符项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm1"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm2"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm3"  Title="明细公用字符自定义数值项"/>
			<Property Name="RDRecordDetailDTO.pubuserdefdecm4"  Title="明细公用字符自定义数值项"/>
          </Detail>
        </Details>
      </FullQuery>

      <TransactionDoc Type="UFIDA.T.UA.ST.FC.DocGensi_SaleDispatchCancelCost">
        <!--摘要匹配 begin-->
        <SummaryFields>
          <Property Name="VoucherTypeId" Mapping="IdvoucherType" Title="单据类型ID"/>
          <Property Name="BusiTypeId" Mapping="IdbusiType" Title="业务类型ID"/>
          <Property Name="BusiType" Mapping="BusiType.Name" Title="业务类型"/>
          <Property Name="Partner" Mapping="SettleCustomer.Name" Title="往来单位"/>
          <Property Name="PartnerClass" Mapping="SettleCustomer.IdpartnerClass" Title="往来单位分类"/>
          <Property Name="Department" Mapping="Department.Name" Title="部门"/>
          <Property Name="Person" Mapping="Clerk.Name" Title="人员"/>
          <Property Name="Memo" Mapping="Memo" Title="备注"/>
        </SummaryFields>
        <!--摘要匹配 end-->
        <!--分录 begin-->
        <!--贷:主营业务成本 销售出库单存货的对方科目 begin-->
        <TransactionEntry Code="CreditFromInventoryPartner" DCDirection="Credit" Name="存货对方科目，生成贷方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <!--科目匹配 begin-->
            <Account AccountRuleType="InventoryPartner">
              <!--存货对方科目扩展-->
              <ExtendRuleProperty Name="Idvouchertype" SourceVoucherProperty="RDRecord.IdvoucherType"/>
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idrdstyle" SourceVoucherProperty="RDRecord.IdrdStyle"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="IdpartnerClass" SourceVoucherProperty="RDRecord.SettleCustomer.IdpartnerClass" Title="客户分类"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="IdinventoryClass" SourceVoucherProperty="Inventory.IdinventoryClass" Title="存货分类"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
			</Account>
            <!--科目匹配 end-->
          </Entry>
          <!--辅助信息 begin-->
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
			<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
            <Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
            <Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>
            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <!--辅助信息 end-->
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--贷:主营业务成本 销售出库单存货的对方科目 end-->
        <!--借：发出商品 发出商品科目 begin-->
        <TransactionEntry Code="DebitFromDeliveryInventory" DCDirection="Debit" Name="发出商品科目，生成借方">
          <Entry>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency" Title="币种"/>
            <Property Doc="ExchangeRate" SourceVoucher="RDRecord.ExchangeRate" Title="汇率"/>
            <Property Doc="Memoto" SourceVoucher="RDRecord.Memo" Title="备注"/>
            <Account AccountRuleType="DeliveryInventory">
              <!--发出商品科目扩展-->
              <ExtendRuleProperty Name="Idbusitype" SourceVoucherProperty="RDRecord.IdbusiType"/>
              <ExtendRuleProperty Name="Idinventory"  SourceVoucherProperty="Idinventory"/>
              <ExtendRuleProperty Name="Idinventoryclass" SourceVoucherProperty="Inventory.idinventoryclass"/>
				<ExtendRuleProperty Name="IsLaborCost" SourceVoucherProperty="Inventory.IsLaborCost" Title="存货属性"/>
				<ExtendRuleProperty Name="IdprojectClass" SourceVoucherProperty="Project.Idclass" Title="项目分类"/>
              <ExtendRuleProperty Name="Idpartnerclass" SourceVoucherProperty="RDRecord.SettleCustomer.idpartnerClass"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc0" SourceVoucherProperty="Inventory.priuserdefnvc1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm0" SourceVoucherProperty="Inventory.priuserdefdecm1"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc1" SourceVoucherProperty="Inventory.priuserdefnvc2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm1" SourceVoucherProperty="Inventory.priuserdefdecm2"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc2" SourceVoucherProperty="Inventory.priuserdefnvc3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm2" SourceVoucherProperty="Inventory.priuserdefdecm3"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc3" SourceVoucherProperty="Inventory.priuserdefnvc4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm3" SourceVoucherProperty="Inventory.priuserdefdecm4"/>
              <ExtendRuleProperty Name="Inventorypriuserdefnvc4" SourceVoucherProperty="Inventory.priuserdefnvc5"/>
              <ExtendRuleProperty Name="Inventorypriuserdefdecm4" SourceVoucherProperty="Inventory.priuserdefdecm5"/>
              <ExtendRuleProperty Name="Idpartner" SourceVoucherProperty="RDRecord.IdSettleCustomer"/>
              <ExtendRuleProperty Name="Iddepartment" SourceVoucherProperty="RDRecord.Iddepartment"/>
              <ExtendRuleProperty Name="Idproject" SourceVoucherProperty="Idproject"/>

				<ExtendRuleProperty Name="Headerpubuserdefnvc0" SourceVoucherProperty="RDRecord.pubuserdefnvc1" Title="表头公共自定义字符项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc1" SourceVoucherProperty="RDRecord.pubuserdefnvc2" Title="表头公共自定义字符项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc2" SourceVoucherProperty="RDRecord.pubuserdefnvc3" Title="表头公共自定义字符项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc3" SourceVoucherProperty="RDRecord.pubuserdefnvc4" Title="表头公共自定义字符项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc4" SourceVoucherProperty="RDRecord.pubuserdefnvc5" Title="表头公共自定义字符项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefnvc5" SourceVoucherProperty="RDRecord.pubuserdefnvc6" Title="表头公共自定义字符项6"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm0" SourceVoucherProperty="RDRecord.pubuserdefdecm1" Title="表头公共自定义数值项1"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm1" SourceVoucherProperty="RDRecord.pubuserdefdecm2" Title="表头公共自定义数值项2"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm2" SourceVoucherProperty="RDRecord.pubuserdefdecm3" Title="表头公共自定义数值项3"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm3" SourceVoucherProperty="RDRecord.pubuserdefdecm4" Title="表头公共自定义数值项4"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm4" SourceVoucherProperty="RDRecord.pubuserdefdecm5" Title="表头公共自定义数值项5"/>
				<ExtendRuleProperty Name="Headerpubuserdefdecm5" SourceVoucherProperty="RDRecord.pubuserdefdecm6" Title="表头公共自定义数值项6"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc0" SourceVoucherProperty="pubuserdefnvc1" Title="表体公共自定义字符项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc1" SourceVoucherProperty="pubuserdefnvc2" Title="表体公共自定义字符项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc2" SourceVoucherProperty="pubuserdefnvc3" Title="表体公共自定义字符项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefnvc3" SourceVoucherProperty="pubuserdefnvc4" Title="表体公共自定义字符项4"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm0" SourceVoucherProperty="pubuserdefdecm1" Title="表体公共自定义数值项1"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm1" SourceVoucherProperty="pubuserdefdecm2" Title="表体公共自定义数值项2"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm2" SourceVoucherProperty="pubuserdefdecm3" Title="表体公共自定义数值项3"/>
				<ExtendRuleProperty Name="Detailspubuserdefdecm3" SourceVoucherProperty="pubuserdefdecm4" Title="表体公共自定义数值项4"/>
            </Account>
          </Entry>
          <Auxiliary>
            <Property Doc="Iddepartment" SourceVoucher="RDRecord.Iddepartment"/>
            <Property Doc="Idperson" SourceVoucher="RDRecord.IdClerk"/>
            <Property Doc="Idcurrency" SourceVoucher="RDRecord.Idcurrency"/>
            <Property Doc="Idbusitype" SourceVoucher="RDRecord.IdbusiType"/>
            <Property Doc="VoucherCode" SourceVoucher="RDRecord.Code"/>
            <Property Doc="VoucherDate" SourceVoucher="RDRecord.VoucherDate"/>
            <Property Doc="IdvoucherType" SourceVoucher="RDRecord.IdvoucherType" Title="单据类型"/>
            <Property Doc="IdoutRdStyle" SourceVoucher="RDRecord.IdRdStyle"/>
            <Property Doc="Idproject" SourceVoucher="Idproject"/>
		<Property Doc="IdprojectClass" SourceVoucher="Project.Idclass"/>
		<Property Doc="Idinventory" SourceVoucher="Idinventory"/>
		<Property Doc="IdUnit" SourceVoucher="IdUnit" Title="计量单位"/>
		<Property Doc="IdinventoryClass" SourceVoucher="Inventory.IdinventoryClass"/>

            <Property Doc="Idcustomer" SourceVoucher="RDRecord.IdSettleCustomer"/>
            <Property Doc="IdcustomerClass" SourceVoucher="RDRecord.SettleCustomer.IdpartnerClass"/>
            <Property Doc="Iddistrict" SourceVoucher="RDRecord.SettleCustomer.Iddistrict"/>
            <Property Doc="Idwarehouse" SourceVoucher="Idwarehouse"/>
          </Auxiliary>
          <SourceRelation>
            <Property Doc="SourceVoucherId" SourceVoucher="RDRecord.ID"/>
            <Property Doc="SourceVoucherTs" SourceVoucher="RDRecord.Ts"/>
            <Property Doc="SourceVoucherDetailId" SourceVoucher="ID"/>
            <Property Doc="SourceVoucherDetailTs" SourceVoucher="Ts"/>
          </SourceRelation>
        </TransactionEntry>
        <!--借：发出商品 发出商品科目 end-->

        <!--分录 end-->
      </TransactionDoc>
      <!--凭证回写单据-->
      <DocUpdateBack Type="UFIDA.T.UA.ST.FC.DocUpdateBacksi_SaleDispatchCancelCost"/>
    </Voucher>
    <!--先开票后出库的出库单回冲成本 end-->

    <DocReIndexs>
      <DocReIndex Name="采购入库单明细" TableName="ST_RDRecord" DocIdField="DocId" DocCodeField="DocNo" />
      <DocReIndex Name="存货明细账" TableName="ST_SubsidiaryBook" DocIdField="DocId" DocCodeField="DocNo" />
      <DocReIndex Name="存货明细账" TableName="ST_SubsidiaryBook" DocIdField="DocId" DocCodeField="FinanceVoucherID" />
    </DocReIndexs>

  </Modle>
</DocSourceVoucher>